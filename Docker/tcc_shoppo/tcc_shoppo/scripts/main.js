function copyData(a){var b={};for(var c in a)b[c]=a[c];return b}function mergeData(data1,data2){var newObj={};return newObj=eval("("+(JSON.stringify(data1)+JSON.stringify(data2)).replace(/}{/,",")+")")}function generateQrCode(a){$(".qrcode").qrcode({render:QRCODE_DEFAULT_RENDER,size:QRCODE_DEFAULT_SIZE,color:QRCODE_DEFAULT_COLOR,text:a,width:QRCODE_DEFAULT_SIZE,height:QRCODE_DEFAULT_SIZE,correctLevel:QRCODE_DEFAULT_CORRECT_LEVEL,background:QRCODE_DEFAULT_BG_COLOR,foreground:QRCODE_DEFAULT_COLOR})}function gotoMerchant(a){angular.element("#shoppingMap").scope().gotoMerchant(a)}function gotoMall(a){angular.element("#shoppingMap").scope().gotoMall(a)}function apiResultsProcessingFun(a,b,c){a.errorCode==SUCCESS_STATUS?b():10401==a.errorCode||10402==a.errorCode?(angular.element("body").scope().$root.warningDlg({msg:a.errorMessage}),angular.element("body").scope().$root.goLanding()):10468==a.errorCode||10484==a.errorCode?b():void 0!=c?c():angular.element("body").scope().$root.warningDlg({msg:a.errorMessage})}function config(a,b,c){var d=rndver;c.config({modules:[{name:"loginController",files:["scripts/controller/loginCtrl.js?rnd="+d]},{name:"loginMobileController",files:["scripts/controller/loginMobileCtrl.js?rnd="+d]},{name:"loginEmailController",files:["scripts/controller/loginEmailCtrl.js?rnd="+d]},{name:"mainController",files:["scripts/controller/mainCtrl.js?rnd="+d]},{name:"angular-iscroll",serie:!0,files:["js/iscroll.min.js","js/angular-iscroll.min.js"]},{name:"iscroll",serie:!0,files:["js/iscroll.js"]},{name:"me-lazyload",files:["js/me-lazyload.js"]},{name:"GeoUtils_min",files:["js/GeoUtils_min.js"]},{name:"qrcode",files:["js/jquery.qrcode.min.js"]},{name:"flexslider",files:["js/jquery.flexslider.min.js"]},{name:"e-smart-zoom",files:["js/e-smart-zoom-jquery.min.js"]},{name:"validate",files:["js/jquery.validate.js"]},{name:"big",files:["js/big.min.js"]},{name:"LandingController",files:["scripts/controller/landingCtrl.js?rnd="+d]},{name:"PromotionController",files:["scripts/controller/promotionCtrl.js?rnd="+d]},{name:"GameController",files:["scripts/controller/gameCtrl.js?rnd="+d]},{name:"JsBarcode128",serie:!0,files:["js/JsBarcode.code128.min.js"]},{name:"device",serie:!0,files:["js/devicedetection.js"]},{name:"StampsCardController",serie:!0,files:["scripts/controller/stampsCardCtrl.js?rnd="+d]},{name:"StampsDetailController",serie:!0,files:["scripts/controller/stampsDetailCtrl.js?rnd="+d]},{name:"TermsController",files:["scripts/controller/termsCtrl.js?rnd="+d]},{name:"GiftDetailController",files:["scripts/controller/giftDetailCtrl.js?rnd="+d]},{name:"GiftDetailExpiredController",files:["scripts/controller/giftDetailExpiredCtrl.js?rnd="+d]},{name:"GiftDetailReserveController",files:["scripts/controller/giftDetailReserveCtrl.js?rnd="+d]},{name:"ReservationFormController",files:["scripts/controller/reservationFormCtrl.js?rnd="+d]},{name:"ReservationConfirmController",files:["scripts/controller/reservationConfirmCtrl.js?rnd="+d]},{name:"ReservationCompleteController",files:["scripts/controller/reservationCompleteCtrl.js?rnd="+d]},{name:"UserController",files:["scripts/controller/userCtrl.js?rnd="+d]},{name:"UserReservationDetailController",files:["scripts/controller/userReservationDetailCtrl.js?rnd="+d]},{name:"bootstrap",serie:!0,files:["js/bootstrap.js"]},{name:"AddFriendsController",files:["scripts/controller/addFriendsCtrl.js?rnd="+d]},{name:"AddFriendsSearchListController",files:["scripts/controller/addFriendsSearchListCtrl.js?rnd="+d]},{name:"MoreController",files:["scripts/controller/moreCtrl.js?rnd="+d]},{name:"RegistrationController",files:["scripts/controller/registrationCtrl.js?rnd="+d]},{name:"RegistrationEmailController",files:["scripts/controller/registrationEmailCtrl.js?rnd="+d]},{name:"ForgetPasswordController",files:["scripts/controller/forgetPasswordCtrl.js?rnd="+d]},{name:"EmailVerificationController",files:["scripts/controller/emailVerificationCtrl.js?rnd="+d]},{name:"EmailVerificationResentController",files:["scripts/controller/emailVerificationResentCtrl.js?rnd="+d]},{name:"SetProfileController",files:["scripts/controller/setProfileCtrl.js?rnd="+d]},{name:"AccountManagementController",files:["scripts/controller/accountManagementCtrl.js?rnd="+d]},{name:"ChangeProfilePictureController",files:["scripts/controller/changeProfilePictureCtrl.js?rnd="+d]},{name:"EditProfileController",files:["scripts/controller/editProfileCtrl.js?rnd="+d]},{name:"ResetRrgistrationEmailController",files:["scripts/controller/resetRrgistrationEmailCtrl.js?rnd="+d]},{name:"ErrorController",files:["scripts/controller/errorCtrl.js?rnd="+d]},{name:"CropImageController",files:["scripts/controller/cropImageCtrl.js?rnd="+d]},{name:"TestController",files:["scripts/controller/testCtrl.js?rnd="+d]},{name:"MobiScrollCss",serie:!0,files:["styles/mobiscroll/mobiscroll.frame.css","styles/mobiscroll/mobiscroll.frame.ios.css","styles/mobiscroll/mobiscroll.scroller.css","styles/mobiscroll/mobiscroll.scroller.android.css","styles/mobiscroll/mobiscroll.scroller.ios.css"]},{name:"SettingController",files:["scripts/controller/settingCtrl.js?rnd="+d]},{name:"cropper",serie:!0,files:["js/cropper.min.js","styles/cropper.min.css","styles/jquery.nouislider.css","js/jquery.nouislider.min.js","js/angular-nouislider.js"]},{name:"StoreListController",files:["scripts/controller/storeListCtrl.js?rnd="+d]},{name:"RedemptionHistoryController",files:["scripts/controller/redemptionHistoryCtrl.js?rnd="+d]},{name:"TAndCController",files:["scripts/controller/tAndCCtrl.js?rnd="+d]},{name:"PrivacyController",files:["scripts/controller/privacyCtrl.js?rnd="+d]},{name:"swiper",serie:!0,files:["js/swiper.min.js","styles/swiper.min.css"]},{name:"jquery_mobile",serie:!0,files:["js/jquery.mobile.custom.min.js"]},{name:"InquiryController",files:["scripts/controller/inquiryCtrl.js?rnd="+d]},{name:"ResetPasswordController",files:["scripts/controller/resetPasswordCtrl.js?rnd="+d]},{name:"ResetRegisterEmailController",files:["scripts/controller/resetRegisterEmailCtrl.js?rnd="+d]},{name:"ResetMobileController",files:["scripts/controller/resetMobileCtrl.js?rnd="+d]},{name:"AboutUsController",files:["scripts/controller/aboutUsCtrl.js?rnd="+d]},{name:"StampsDetailExpiredController",files:["scripts/controller/stampsDetailExpiredCtrl.js?rnd="+d]},{name:"TutorialController",files:["scripts/controller/tutorialCtrl.js?rnd="+d]},{name:"FAQController",files:["scripts/controller/FAQCtrl.js?rnd="+d]},{name:"verifyEmailController",files:["scripts/controller/verifyEmailCtrl.js?rnd="+d]},{name:"couponDetailController",files:["scripts/controller/couponDetailCtrl.js?rnd="+d]},{name:"myCouponDetailController",files:["scripts/controller/myCouponDetailCtrl.js?rnd="+d]},{name:"redeemCouponController",files:["scripts/controller/redeemCouponCtrl.js?rnd="+d]},{name:"scanCollectCodeController",files:["scripts/controller/scanCollectCodeCtrl.js?rnd="+d]}]}),a.state("main",{abstract:!0,url:"/main",controller:"MainCtrl",templateUrl:"pages/common/content.html?rnd="+d,data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load("mainController","validate","device")}]}}).state("main.login",{url:"/login",templateUrl:"pages/login.html?rnd="+d,controller:"LoginCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["loginController","device","validate"])}]}}).state("main.loginMobile",{url:"/loginMobile",templateUrl:"pages/loginMobile.html?rnd="+d,controller:"LoginMobileCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["loginMobileController","device","validate","MobiScrollCss"])}]}}).state("main.loginEmail",{url:"/loginEmail",templateUrl:"pages/loginEmail.html?rnd="+d,controller:"LoginEmailCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["loginEmailController","device","validate"])}]}}).state("main.resetMobile",{url:"/resetMobile",templateUrl:"pages/resetMobile.html?rnd="+d,controller:"ResetMobileCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ResetMobileController","device","validate","MobiScrollCss"])}]}}).state("main.landing",{url:"/landing",templateUrl:"pages/landing.html?rnd="+d,controller:"LandingCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["LandingController","angular-iscroll","me-lazyload","flexslider","validate"])}]}}).state("main.tutorial",{url:"/tutorial",templateUrl:"pages/tutorial.html?rnd="+d,controller:"TutorialCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["TutorialController","flexslider"])}]}}).state("main.cropImage",{url:"/cropImage",templateUrl:"pages/cropImage.html",data:{pageTitle:"CropImage"},controller:"CropImageCtrl",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["CropImageController","cropper"])}]}}).state("main.promotion",{url:"/promotion",templateUrl:"pages/promotion.html?rnd="+d,controller:"PromotionCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["PromotionController","swiper","me-lazyload","qrcode","JsBarcode128"])}]}}).state("main.game",{url:"/game",templateUrl:"pages/game.html?rnd="+d,controller:"GameCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["GameController","angular-iscroll","me-lazyload","device"])}]}}).state("main.stampsCard",{url:"/stampsCard",templateUrl:"pages/stampsCard.html?rnd="+d,controller:"StampsCardCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["StampsCardController","angular-iscroll","me-lazyload","qrcode"])}]}}).state("main.stampsDetail",{url:"/stampsDetail",templateUrl:"pages/stampsDetail.html?rnd="+d,controller:"StampsDetailCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["StampsDetailController","jquery_mobile","me-lazyload","qrcode","JsBarcode128","validate"])}]}}).state("main.terms",{url:"/terms",templateUrl:"pages/terms.html?rnd="+d,controller:"TermsCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["TermsController","angular-iscroll","me-lazyload","qrcode"])}]}}).state("main.giftDetail",{url:"/giftDetail",templateUrl:"pages/giftDetail.html?rnd="+d,controller:"GiftDetailCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["GiftDetailController","angular-iscroll","me-lazyload","qrcode","JsBarcode128"])}]}}).state("main.giftDetailExpired",{url:"/giftDetailExpired",templateUrl:"pages/giftDetailExpired.html?rnd="+d,controller:"GiftDetailExpiredCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["GiftDetailExpiredController","angular-iscroll","me-lazyload","qrcode","JsBarcode128"])}]}}).state("main.giftDetailReserve",{url:"/giftDetailReserve",templateUrl:"pages/giftDetailReserve.html?rnd="+d,controller:"GiftDetailReserveCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["GiftDetailReserveController","angular-iscroll","me-lazyload","qrcode","JsBarcode128"])}]}}).state("main.reservationForm",{url:"/reservationForm",templateUrl:"pages/reservationForm.html?rnd="+d,controller:"ReservationFormCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ReservationFormController","angular-iscroll","me-lazyload","qrcode","JsBarcode128","bootstrap","MobiScrollCss"])}]}}).state("main.reservationConfirm",{url:"/reservationConfirm",templateUrl:"pages/reservationConfirm.html?rnd="+d,controller:"ReservationConfirmCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ReservationConfirmController","angular-iscroll","me-lazyload","qrcode","JsBarcode128"])}]}}).state("main.reservationComplete",{url:"/reservationComplete",templateUrl:"pages/reservationComplete.html?rnd="+d,controller:"ReservationCompleteCtrl",data:{pageTitle:"ReservationComplete"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ReservationCompleteController","angular-iscroll","me-lazyload","qrcode","JsBarcode128"])}]}}).state("main.user",{url:"/user",templateUrl:"pages/user.html?rnd="+d,controller:"UserCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["UserController","swiper","me-lazyload","qrcode","JsBarcode128","angular-iscroll"])}]}}).state("main.userReservationDetail",{url:"/userReservationDetail",templateUrl:"pages/userReservationDetail.html?rnd="+d,controller:"UserReservationDetailCtrl",data:{pageTitle:"PageTitleShoppoApp"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["UserReservationDetailController","angular-iscroll","me-lazyload","qrcode","JsBarcode128"])}]}}).state("main.addFriends",{url:"/addFriends",templateUrl:"pages/addFriends.html?rnd="+d,controller:"AddFriendsCtrl",data:{pageTitle:"AddFriends"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["AddFriendsController","angular-iscroll","me-lazyload"])}]}}).state("main.more",{url:"/more",templateUrl:"pages/more.html?rnd="+d,controller:"MoreCtrl",data:{pageTitle:"More"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["MoreController","me-lazyload","device"])}]}}).state("main.registration",{url:"/registration",templateUrl:"pages/registration.html?rnd="+d,controller:"RegistrationCtrl",data:{pageTitle:"Registration"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["RegistrationController","me-lazyload","validate","device","MobiScrollCss"])}]}}).state("main.registrationEmail",{url:"/registrationEmail",templateUrl:"pages/registrationEmail.html?rnd="+d,controller:"RegistrationEmailCtrl",data:{pageTitle:"RegistrationEmail"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["RegistrationEmailController","me-lazyload","validate","device"])}]}}).state("main.forgetPassword",{url:"/forgetPassword",templateUrl:"pages/forgetPassword.html?rnd="+d,controller:"ForgetPasswordCtrl",data:{pageTitle:"ForgetPassword"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ForgetPasswordController","me-lazyload","validate"])}]}}).state("main.emailVerification",{url:"/emailVerification",templateUrl:"pages/emailVerification.html?rnd="+d,controller:"EmailVerificationCtrl",data:{pageTitle:"EmailVerification"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["EmailVerificationController","me-lazyload","validate"])}]}}).state("main.emailVerificationResent",{url:"/emailVerificationResent",templateUrl:"pages/emailVerificationResent.html?rnd="+d,controller:"EmailVerificationResentCtrl",data:{pageTitle:"EmailVerificationResent"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["EmailVerificationResentController","me-lazyload","validate"])}]}}).state("main.setProfile",{url:"/setProfile",templateUrl:"pages/setProfile.html?rnd="+d,controller:"SetProfileCtrl",data:{pageTitle:"SetProfile"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["SetProfileController","me-lazyload","validate","bootstrap","validate","MobiScrollCss"])}]}}).state("main.addFriendsSearchList",{url:"/addFriendsSearchList",templateUrl:"pages/addFriendsSearchList.html?rnd="+d,controller:"AddFriendsSearchListCtrl",data:{pageTitle:"AddFriends"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["AddFriendsSearchListController","me-lazyload"])}]}}).state("main.accountManagement",{url:"/accountManagement",templateUrl:"pages/accountManagement.html?rnd="+d,controller:"AccountManagementCtrl",data:{pageTitle:"Account Management"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["AccountManagementController","me-lazyload"])}]}}).state("main.changeProfilePicture",{url:"/changeProfilePicture",templateUrl:"pages/changeProfilePicture.html?rnd="+d,controller:"ChangeProfilePictureCtrl",data:{pageTitle:"Change Profile Picture"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ChangeProfilePictureController","me-lazyload"])}]}}).state("main.editProfile",{url:"/editProfile",templateUrl:"pages/editProfile.html?rnd="+d,controller:"EditProfileCtrl",data:{pageTitle:"Edit Profile"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["EditProfileController","me-lazyload","validate","bootstrap","validate","MobiScrollCss"])}]}}).state("main.resetRrgistrationEmail",{url:"/resetRrgistrationEmail",templateUrl:"pages/resetRrgistrationEmail.html?rnd="+d,controller:"ResetRrgistrationEmailCtrl",data:{pageTitle:"Edit Profile"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ResetRrgistrationEmailController","me-lazyload","validate","bootstrap"])}]}}).state("main.error",{url:"/error",templateUrl:"pages/error.html?rnd="+d,controller:"ErrorCtrl",data:{pageTitle:"Error page"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ErrorController","me-lazyload","validate","bootstrap"])}]}}).state("main.test",{url:"/test",templateUrl:"pages/test.html?rnd="+d,controller:"TestCtrl",data:{pageTitle:"test page"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["TestController","me-lazyload","validate","bootstrap"])}]}}).state("main.setting",{url:"/setting",templateUrl:"pages/setting.html?rnd="+d,controller:"SettingCtrl",data:{pageTitle:"test page"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["SettingController","me-lazyload","validate","bootstrap"])}]}}).state("main.storeList",{url:"/storeList",templateUrl:"pages/storeList.html?rnd="+d,controller:"StoreListCtrl",data:{pageTitle:"Store List"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["StoreListController","me-lazyload","validate","bootstrap","GeoUtils_min"])}]}}).state("main.redemptionHistory",{url:"/redemptionHistory",templateUrl:"pages/redemptionHistory.html?rnd="+d,controller:"RedemptionHistoryCtrl",data:{pageTitle:"Redemption History"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["RedemptionHistoryController","me-lazyload","validate","bootstrap"])}]}}).state("main.inquiry",{url:"/inquiry",templateUrl:"pages/inquiry.html?rnd="+d,controller:"InquiryCtrl",data:{pageTitle:"Inquiry"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["InquiryController","me-lazyload","validate","bootstrap"])}]}}).state("main.resetPassword",{url:"/resetPassword",templateUrl:"pages/resetPassword.html?rnd="+d,controller:"ResetPasswordCtrl",data:{pageTitle:"ResetPassword"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ResetPasswordController","me-lazyload","validate","bootstrap"])}]}}).state("main.resetRegisterEmail",{url:"/resetRegisterEmail",templateUrl:"pages/resetRegisterEmail.html?rnd="+d,controller:"ResetRegisterEmailCtrl",data:{pageTitle:"ResetRegisterEmail"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["ResetRegisterEmailController","me-lazyload","validate","bootstrap"])}]}}).state("main.aboutUs_en_US",{url:"/aboutUs_en_US",templateUrl:"other_page/aboutUs_en_US.html?rnd="+d,controller:"AboutUsCtrl",data:{pageTitle:"About us"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["AboutUsController","me-lazyload","validate","bootstrap"])}]}}).state("main.tAndC",{url:"/tAndC_en_US",templateUrl:"other_page/tAndC_en_US.html?rnd="+d,controller:"TAndCCtrl",data:{pageTitle:"Terms and condition"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["TAndCController","me-lazyload","validate","bootstrap"])}]}}).state("main.privacy_en_US",{url:"/privacy_en_US",templateUrl:"other_page/privacy_en_US.html?rnd="+d,controller:"PrivacyCtrl",data:{pageTitle:"Privacy and policy"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["PrivacyController","me-lazyload","validate","bootstrap"])}]}}).state("main.stampsDetailExpired",{url:"/stampsDetailExpired",templateUrl:"pages/stampsDetailExpired.html?rnd="+d,controller:"StampsDetailExpiredCtrl",data:{pageTitle:"Privacy and policy"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["StampsDetailExpiredController","me-lazyload","validate","bootstrap"])}]}}).state("main.FAQ",{url:"/FAQ",templateUrl:"pages/FAQ.html?rnd="+d,controller:"FAQCtrl",data:{pageTitle:"FAQ"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["FAQController","me-lazyload","validate","bootstrap"])}]}}).state("main.verifyEmail",{url:"/verifyEmail",templateUrl:"pages/verifyEmail.html?rnd="+d,controller:"VerifyEmailCtrl",data:{pageTitle:"verifyEmail"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["verifyEmailController","me-lazyload","validate","device"])}]}}).state("main.couponDetail",{url:"/couponDetail",templateUrl:"pages/couponDetail.html?rnd="+d,controller:"CouponDetailCtrl",data:{pageTitle:"couponDetail"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["couponDetailController","me-lazyload","validate","device"])}]}}).state("main.myCouponDetail",{url:"/myCouponDetail",templateUrl:"pages/myCouponDetail.html?rnd="+d,controller:"MyCouponDetailCtrl",data:{pageTitle:"myCouponDetail"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["myCouponDetailController","me-lazyload","validate","device"])}]}}).state("main.redeemCoupon",{url:"/redeemCoupon",templateUrl:"pages/redeemCoupon.html?rnd="+d,controller:"RedeemCouponCtrl",data:{pageTitle:"redeemCoupon"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["redeemCouponController","me-lazyload","validate","device","flexslider","qrcode","JsBarcode128"])}]}}).state("main.scanCollectCode",{url:"/scanCollectCode",templateUrl:"pages/scanCollectCode.html?rnd="+d,controller:"ScanCollectCodeCtrl",data:{pageTitle:"scanCollectCode"},resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load(["scanCollectCodeController","me-lazyload","validate","device","flexslider","qrcode","JsBarcode128"])}]}})}function warning(a){setTimeout(function(){$("#warningMsg").val(a),$("#warning").click()},10)}function qrCode(a){setTimeout(function(){$("#qrCodeVal").val(a),$("#qrCode").click()},10)}function resistSession(a){if("undefined"!=typeof keepSession&&keepSession){var b="s01";if(""!=a.userInfo.userId)localStorage.setItem(b,JSON.stringify(a.userInfo));else{var c=localStorage.getItem(b);null!=c&&(a.userInfo=JSON.parse(c))}}}function clearSession(){if("undefined"!=typeof keepSession&&keepSession){localStorage.removeItem("s01")}}function trim(a){return a?a.replace(/[ ]/g,""):""}function phoneCodeFormat(a){return a.replace(/^00/,"+")}function onLastRepeat(){return function(a,b,c){a.$last&&setTimeout(function(){a.$emit("onRepeatLast",b,c)},1)}}function checkBox(){return{restrict:"A",scope:{ngModel:"="},link:function(a,b){1==a.ngModel&&$(b).addClass("checked"),$(b).on("click",function(){$(b).toggleClass("checked"),$(b).hasClass("checked")?a.ngModel=!0:a.ngModel=!1})}}}function config2(a){a.translations("en_US",{en_US:"English",zh_CN:"Simplified Chinese",zh_HK:"Traditional Chinese",btnOk:"OK",Confirm:"Confirm",stamps:"stickers",Stamps:"Stickers",totalStampsCollected:"Total Stickers Collected​",stampsCollection:"Sticker Collection Card",startToCollect:"Collect stickers now!",collect:"Collect",redeem:"Redeem",Redeem:"redeem",startNow:"Start",Promotion:"Promotion",Promotions:"Promotions",PromotionsLanding:"Promos",All:"All",myCoupon:"My Coupon",usedCoupon:"Coupon Record",stampsCards:"Collected Stickers​",expiredStampsCards:"Expired Stickers​",infoAndReward:"Rewards​",transferStamps:"Transfer Stickers​",collectStamps:"Collect stickers",promotionDetails:"Promo Details​",collectionPeriod:"Sticker Issuance​",redemptionPeriod:"Redemption​",redemptionGifts:"Rewards​",Gift:"Rewards​",Reward:"Reward",redemptionRequest:"Redemption request",RedemptionDetails:"Redemption Details",stockStatus:"Status​",reserve:"reserve",Reserve:"Reserve",District:"City",pickUpStore:"Pick up store",BranchStore:"Branch/Store",pickUp:"Pick up",Phone:"Phone",firstName:"First name",lastName:"Last name",Name:"Name",contactNumber:"Contact no.​","firstName:":"First name:","lastName:":"Last name:","contactNumber:":"Contact no.​:",Reservation:"Reservation",confirmReservation:"Confirm your reservation",completeReservation:"Complete reservation",Thank:"Thank you!",reservationIsCompleted:"Reservation successful.",andThisIsYourReservationNo:"Reference no.​",getNotificationToPickUp:"You will get a notification once reward is available for pick up.",redeemOtherGifts:"Redeem other rewards",Me:"Profile",stampHistory:"Sticker history",TransactionHistory:"Transaction History",redemptionHistory:"Reward Redemption",Friends:"Friends",Date:"Date",requestDate:"Request Date",redemptionDate:"Redemption Date",stampOut:"-",StampIn:"+",friendsrequests:"Friend Request",Accept:"Accept",deleteRequest:"Decline",myFriends:"Friends",pleaseRegisterOrLogin:"Log in to Rustan's Supermarket app to reserve rewards. Not yet a member?",registerOrLogin:"Register/log in",Email:"Email",Message:"Message",Inquiry:"Inquiry",Edit:"Edit",editProfile:"Edit profile",resetRegitrationEmail:"Reset log in email",changePassword:"Change email log in password",searchFriendOrInviteFriend:"Can’t find your friends? Send them an invitation!",Invite:"Invite",Search:"Search",addFriend:"Add Friend",Share:"Share",searchFriendNoResult:"No results found. If you are searching by mobile number, please try not to enter area code.",selectPhoto:"Select photo",Save:"Save",userName:"Username",firstName:"First name",lastName:"Last name",mobileNumber:"Mobile number",Gender:"Gender",dateOfBirth:"Birthday",Done:"Done",sentVerificationEmail:"Sent verification email",resentVerificationEmail:"Resend verification email.",passwordReset:"Password Reset",haveSentEmail:"We've sent an email to ",AnEmailWasSentTo:"An email was sent to ",comforPasswordReset:" for the password reset.",toVerifyYourAddress:"to verify your address",activeAccount:"Please see email verification to activate your account.",activateYourAccount:"Activate Your Account",haveRegisteredEmail:"You have already registered the email",doNotVerified:"but is not verified yet",resetPassword:"Reset password",enterEmailAddress:"Please enter your email address.",Send:"Send",withFurtherIntstructions:"with further intstructions",troubleReceivePasswordResetEmail:"Having trouble receiving the password reset email",cannotSeeEmail:"If you still don’t see the email, try again",checkSpamFolder:"Check your spam folder for an email from cs@rustan.com",loginEmail:"Log in Email",Password:"Password",forgetPassword:"Forget password",Login:"Log in",LoginLanding:"Log in",facebookLogin:"Log in via Facebook",Register:"Register",facebookRegister:"Register via Facebook​",facebookViaRegister:"Register via Facebook​",Logout:"Logout",accountManagement:"Manage Account",Setting:"Settings",storeList:"Store list",Tutorial:"Tutorial",Inquiry:"Contact Us",FAQ:"FAQ",aboutUs:"About Us",termsAndConditions:"Terms & Conditions",PrivacyAndPolicy:"Privacy Policy",redemptionNumber:"Redemption Number",RedemptionDetails:"Redemption Details",confirmEmail:"Confirm Email","Enter your new password":"Enter your new password",confirmPassword:"Confirm password",confirmNewPassword:"Confirm new password",passwordFormat:"Your password must have 8-15 characters with both numbers and letters (case-sensitive)",readAndAgree:"You must agree to the",or:"or",termsAConditions:"Terms & Conditions",privacyAPolicy:"Privacy Policy",enterOldPassword:"Enter your old password",Next:"Next",enterPasswordResetEmail:"Please enter your password to reset registered email.",changeExisitingEmail:"If you would like to change your existing registered email: ",enterNewEmail:" please enter the new email address and we'll send an email to verify.",reservationStatus:"Status:​",ReservationNo:"Reservation No.",pickUpBefore:"Pick up before",scanToCompleteReservation:"Scan to complete the reservation",inCompleted:"in-completed reservation",The:"The",reservationFinishTime:"will be expired after today 23:59.Please complete the the reservation at the store",addFriends:"Add friends",changeProfilePicture:"Change Profile Picture",profilePicture:"Profile Picture",emailVerification:"Email Verification",accountActivation:"Account activation",More:"More",Registration:"Registration","Register​":"Register​",resetRegistrationEmail:"Reset registration email",setupProfile:"Edit Profile",setProfile:"Set up profile",selectLanguage:"Select language",optional:"optional",editProfilePicture:"Edit Profile Picture",viewCampaign:"View Campaign",creatNow:"Creat now",Home:"Home",emptyHistory:"Your history is empty",redeemReward:"Redeem reward",showqrCode:"Scan the code below:​",scanToRedeem:"Scan code to redeem:​",couponsGetMoreStamps:"You have below coupons to get more stickers",tryToReloadLater:"Your request is processing, please try to reload later",Reload:"Reload",collectionSuccess:"Sticker issuance success! ","Grant success":"You have",Error:"Error",requestNotComplete:"Sticker issuance not completed.",codeIsExpired:"Code is expired.",reopenCode:"Please reopen a new code.​",Close:"Close",youHaveUsed:"You have used",Finished:"Finished",codeRemainTime:"Code remaining time",to:"to",nowStillHave:"You have remaining",stillHave:"You now have",scanForReservation:"Scan the below code for reservation",haveGetReward:"You have get the reward",haveCompleteReservation:"You have complete the reservation",stampsYouWantToTransfer:"How many stickers do you want to transfer?",notEnoughStamps:"You do not have enough stickers to transfer",grantStampsCanNotBeTransfered:" Free stickers are non-transferable.",selectOneFriend:"Select a friend",Cancel:"Cancel",youHave:"You have",youHaveGot:"You have got",now:"now",confirmToTransfer:"Confirm transfer of",Compeleted:"Compeleted!",haveTransfered:"You transferred",requestHaveBeenSent:"Request sent.",emailSentAgain:"Email send to",checkYourEmail:"Check your inbox, and/or other email folders.",reservationIsProcessing:"Your reservation is processing",checkUpdatedStatusAgain:"Please check the updated status again",notEnoughStampsForReservation:"You don't have enough stickers for the reservation now",getMoreStampsReservation:"Please try to get more stickers to complete your reservation",getGrantStamps:"Thank you for downloading the Stick 'N Collect app. To get you started, we are giving you FREE stickers!",grantSuccess:"Claimed! You have ",Later:"Later",resetRegisterEmailSuccess:"You have reset your register email successfully",loginAgain:"Please log in again",resetPasswordSuccess:"You have reset your password successfully",PageTitleShoppoApp:"Rustan's",tutorial:"Tutorial",RegisterNow:"Register Now",Pending:"Pending","Description​":"Description​","RedeemNow​":"Redeem Now​",of:"of",numberStampsUsed:"No. of stickers used",location:"Location","Claim​":"Claim​",Inivtied:"Inivtied",searchfriends:"Search friends",searchResultFor:"Search results for",aTotalOf:"a total of",takePhoto:"Take photo",haveBeenInvited:"You have been invited already! Accept his/her friend request now.",isMarketingInfo:"I agree to use my personal data for information and receive information about Rustan's direct marketing.",Tutorial:"Tutorial","No expired stickers":"No expired stickers",shareTitle1:"Marketplace and Rustan’s Supermarket ",shareTitle2:" App",inviteDisc1:"Hi, I'm in ",inviteDisc2:". I want to share my stickers with you. Search me by ","Search friends result":"Search friends result",verifyEmail:"Verify Your Email Address",stampHistoryType1:"Issued at Store",stampHistoryType2:"Stickers Sent",stampHistoryType3:"Stickers Received",stampHistoryType4:"Reward Redemption",stampHistoryType5:"Reservation",stampHistoryType6:"Sticker Adjustment",stampHistoryType7:"Sticker Adjustment",stampHistoryType8:"Free Stickers",Comingsoon:"Coming soon!",RegisterNowAndStartCollectingStickers:"Register now and start collecting stickers!",RegisterNow:"Register now","Out of stock":"Out of stock","Available in select stores​":"Available in select stores​","Coming soon":"Coming soon",Expired:"Expired",Inactive:"Inactive","Add friends to join now":"Add friends to join now",RewardName:"Reward name",Invited:"Invited","Request Date":"Reservation Request Date",verificationCode:"Verification code",Resend:"Resend",Passcode:"Verification code",passcodeTip:"Your code has been sent to your mobile number by SMS",changeMobile:"Reset mobile number",couponDetail:"Coupon details",collectionEndDate:"Collection end date",redeemEndDate:"Expiry date",remainingDays:"Remaining days",Details:"Details",youGotTheCoupon:"Congratulation!You have got the coupon.",couponUsedBefore:"Please remember to use before",scanOrInput:"Scan or input the below code",scanStampCardNow:"Scan stamp card now",left:"left",day:"day",days:"days",Redemption:"Redemption",selectCoupon:"Please select coupon",Added:"Added",scanTheBelowCodes:"Please scan the below codes",scanTheBelowCode:"Please scan the below code",coupon:"coupon",swipeToScan:"Please first scan user ID then swipe to scan coupon code",codes:"codes",collectCode:"Collect code",couponCode:"Coupon code",relatedCampaign:"Related campaigns",scanTheCode:"Scan the code",scanCoupon:"Scan coupon",RedeemCoupon:"Redeem",Coupons:"Coupons",Promots:"Promots",USED:"USED",noPromots:"No promots",noCoupons:"No coupons",usernameformat:"Enter 6-12 lowercase letters (a-z)/numbers (0-9)",inputMobileTip:"Input and verify mobile number","Verify your account":"Verify your account",verified1:"Your mobile number has been verified.",verified2:"Fill in your profile in Stick 'N Collect to complete the registration.","Enter your registered":"Enter your","Mobile registration":"Mobile number registration","Your profile":"Your profile","Verification successful":"Verification successful","Link with Facebook":"Link with Facebook",VerifyEmailForLogin:"Log in with email? Verify here!",verifyEmailpage:"Log in with verified email",verifyEmailTip1:"We've sent an email to ",verifyEmailTip2:" with further instructions. ",verifyEmailTip3:"If you have trouble receiving the email, check your spam folder for an email from stickers@rsci.com.ph. If you still cannot find the email, please request to resend here.",verifySameEmail:"You have requested to resend verification to same email in the past 24 hours.  It can only be resent once within 24 hours for security reason.  Please check your inbox and spam folder for the email.  If you do not receive any verification email, please try to resend again later.",NewMobileNumber:"New mobile number","Fill passcode":"Verification code",RegisterWithMobile:"Register with mobile number?","Input password":"Log in",hoursTip:"Can only resend once within 24 hours.",Nearby:"Nearby","Register with email?":"Register with email?","Contact email":"Contact email",resetMobileNumber:"Reset mobile number"}).translations("zh_CN",{en_US:"英文",zh_CN:"简体中文",zh_HK:"繁体中文",selectLanguage:"选择语言"}).translations("zh_HK",{en_US:"英文",zh_CN:"簡體中文",zh_HK:"繁體中文",selectLanguage:"選擇語言"}),a.preferredLanguage("en_US")}function getCookie(a){var b="; "+document.cookie,c=b.split("; "+a+"=");if(2==c.length)return c.pop().split(";").shift()}function jsonpCallback(a){webim.setJsonpLastRspData(a)}function onMsgNotify(a){var b=webim.MsgStore.sessMap();for(var c in b){var d=b[c];if(selToID==d.id()){selSess=d;var e=d.msgCount();if(e>curMsgCount){for(var f=curMsgCount;f<e;f++){addMsg(d.msg(f)),curMsgCount++}webim.setAutoRead(selSess,!0,!0)}}}}function getGroupsCallbackOK(){selType==SessionType.GROUP&&getGroupInfo(selToID,function(a){var b={GroupId:selToID,ReqMsgSeq:a.GroupInfo[0].NextMsgSeq-1,ReqMsgNumber:100};if(null==b.ReqMsgSeq||void 0==b.ReqMsgSeq)return void alert("群消息序列号非法");webim.syncGroupMsgs(b,syncMsgsCallbackOK)})}function syncMsgsCallbackOK(){if(webim.MsgStore.sessCount()>0){var a=webim.MsgStore.sessMap();for(var b in a){var c=a[b];if(selToID==c.id()){selSess=c;var d=c.msgCount();if(d>curMsgCount){for(var e=curMsgCount;e<d;e++){addMsg(c.msg(e)),curMsgCount++}webim.setAutoRead(selSess,!0,!0)}}}}}function addMsg(a){var b=a.isSend?"#message-template":"#message-response-template",c=Handlebars.compile($(b).html()),d=a.isSend?userImg:merchantLogo,e={messageOutput:a.toHtml(),response:a.toHtml(),time:webim.Tool.formatTimeStamp(a.time),name:merchantName,imgUrl:d};$chatHistory=$(".chat-history"),$chatHistoryList=$chatHistory.find("ul"),$chatHistoryList.append(c(e)),$chatHistory.scrollTop($chatHistory[0].scrollHeight)}!function(a,b,c){"use strict";function d(a){return b.lowercase(a.nodeName||a[0]&&a[0].nodeName)}function e(a,c,d){f.directive(a,["$parse","$swipe",function(e,f){return function(g,h,i){function j(a){if(!k)return!1;var b=Math.abs(a.y-k.y),d=(a.x-k.x)*c;return l&&b<75&&d>0&&d>30&&b/d<.3}var k,l,m=e(i[a]),n=["touch"];b.isDefined(i.ngSwipeDisableMouse)||n.push("mouse"),f.bind(h,{start:function(a,b){k=a,l=!0},cancel:function(a){l=!1},end:function(a,b){j(a)&&g.$apply(function(){h.triggerHandler(d),m(g,{$event:b})})}},n)}}])}var f=b.module("ngTouch",[]);f.factory("$swipe",[function(){function a(a){var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],d=b.changedTouches&&b.changedTouches[0]||c[0];return{x:d.clientX,y:d.clientY}}function c(a,c){var d=[];return b.forEach(a,function(a){var b=e[a][c];b&&d.push(b)}),d.join(" ")}var d=10,e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(b,e,f){var g,h,i,j,k=!1;f=f||["mouse","touch"],b.on(c(f,"start"),function(b){i=a(b),k=!0,g=0,h=0,j=i,e.start&&e.start(i,b)});var l=c(f,"cancel");l&&b.on(l,function(a){k=!1,e.cancel&&e.cancel(a)}),b.on(c(f,"move"),function(b){if(k&&i){var c=a(b);if(g+=Math.abs(c.x-j.x),h+=Math.abs(c.y-j.y),j=c,!(g<d&&h<d))return h>g?(k=!1,void(e.cancel&&e.cancel(b))):(b.preventDefault(),void(e.move&&e.move(c,b)))}}),b.on(c(f,"end"),function(b){k&&(k=!1,e.end&&e.end(a(b),b))})}}}]),f.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),f.directive("ngClick",["$parse","$timeout","$rootElement",function(a,c,e){function f(a,b,c,d){return Math.abs(a-c)<q&&Math.abs(b-d)<q}function g(a,b,c){for(var d=0;d<a.length;d+=2)if(f(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function h(a){if(!(Date.now()-k>p)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,e=b[0].clientY;c<1&&e<1||m&&m[0]===c&&m[1]===e||(m&&(m=null),"label"===d(a.target)&&(m=[c,e]),g(l,c,e)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur&&a.target.blur()))}}function i(a){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;l.push(d,e),c(function(){for(var a=0;a<l.length;a+=2)if(l[a]==d&&l[a+1]==e)return void l.splice(a,a+2)},p,!1)}function j(a,b){l||(e[0].addEventListener("click",h,!0),e[0].addEventListener("touchstart",i,!0),l=[]),k=Date.now(),g(l,a,b)}var k,l,m,n=750,o=12,p=2500,q=25,r="ng-click-active";return function(c,d,e){function f(){m=!1,d.removeClass(r)}var g,h,i,k,l=a(e.ngClick),m=!1;d.on("touchstart",function(a){m=!0,g=a.target?a.target:a.srcElement,3==g.nodeType&&(g=g.parentNode),d.addClass(r),h=Date.now();var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],e=c[0];i=e.clientX,k=e.clientY}),d.on("touchcancel",function(a){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.originalEvent||a,p=l.changedTouches&&l.changedTouches.length?l.changedTouches:l.touches&&l.touches.length?l.touches:[l],q=p[0],r=q.clientX,s=q.clientY,t=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-k,2));m&&c<n&&t<o&&(j(r,s),g&&g.blur(),b.isDefined(e.disabled)&&!1!==e.disabled||d.triggerHandler("click",[a])),f()}),d.onclick=function(a){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(a){d.addClass(r)}),d.on("mousemove mouseup",function(a){d.removeClass(r)})}}]),e("ngSwipeLeft",-1,"swipeleft"),e("ngSwipeRight",1,"swiperight")}(window,window.angular),function(a){function b(a,b,c){var j=0,k=[0],l="",m=null,l=c||"UTF8";if("UTF8"!==l&&"UTF16"!==l)throw"encoding must be UTF8 or UTF16";if("HEX"===b){if(0!=a.length%2)throw"srcString of HEX type must be in byte increments";m=e(a),j=m.binLen,k=m.value}else if("ASCII"===b||"TEXT"===b)m=d(a,l),j=m.binLen,k=m.value;else{if("B64"!==b)throw"inputFormat must be HEX, TEXT, ASCII, or B64";m=f(a),j=m.binLen,k=m.value}this.getHash=function(a,b,c,d){var e,f=null,l=k.slice(),m=j;if(3===arguments.length?"number"!=typeof c&&(d=c,c=1):2===arguments.length&&(c=1),c!==parseInt(c,10)||1>c)throw"numRounds must a integer >= 1";switch(b){case"HEX":f=g;break;case"B64":f=h;break;default:throw"format must be HEX or B64"}if("SHA-1"===a)for(e=0;e<c;e++)l=G(l,m),m=160;else if("SHA-224"===a)for(e=0;e<c;e++)l=H(l,m,a),m=224;else if("SHA-256"===a)for(e=0;e<c;e++)l=H(l,m,a),m=256;else if("SHA-384"===a)for(e=0;e<c;e++)l=H(l,m,a),m=384;else{if("SHA-512"!==a)throw"Chosen SHA variant is not supported";for(e=0;e<c;e++)l=H(l,m,a),m=512}return f(l,i(d))},this.getHMAC=function(a,b,c,m,n){var o,p,q,r,s=[],t=[];switch(o=null,m){case"HEX":m=g;break;case"B64":m=h;break;default:throw"outputFormat must be HEX or B64"}if("SHA-1"===c)p=64,r=160;else if("SHA-224"===c)p=64,r=224;else if("SHA-256"===c)p=64,r=256;else if("SHA-384"===c)p=128,r=384;else{if("SHA-512"!==c)throw"Chosen SHA variant is not supported";p=128,r=512}if("HEX"===b)o=e(a),q=o.binLen,o=o.value;else if("ASCII"===b||"TEXT"===b)o=d(a,l),q=o.binLen,o=o.value;else{if("B64"!==b)throw"inputFormat must be HEX, TEXT, ASCII, or B64";o=f(a),q=o.binLen,o=o.value}for(a=8*p,b=p/4-1,p<q/8?(o="SHA-1"===c?G(o,q):H(o,q,c),o[b]&=4294967040):p>q/8&&(o[b]&=4294967040),p=0;p<=b;p+=1)s[p]=909522486^o[p],t[p]=1549556828^o[p];return c="SHA-1"===c?G(t.concat(G(s.concat(k),a+j)),a+r):H(t.concat(H(s.concat(k),a+j,c)),a+r,c),m(c,i(n))}}function c(a,b){this.a=a,this.b=b}function d(a,b){var c,d,e=[],f=[],g=0;if("UTF8"===b)for(d=0;d<a.length;d+=1)for(c=a.charCodeAt(d),f=[],2048<c?(f[0]=224|(61440&c)>>>12,f[1]=128|(4032&c)>>>6,f[2]=128|63&c):128<c?(f[0]=192|(1984&c)>>>6,f[1]=128|63&c):f[0]=c,c=0;c<f.length;c+=1)e[g>>>2]|=f[c]<<24-g%4*8,g+=1;else if("UTF16"===b)for(d=0;d<a.length;d+=1)e[g>>>2]|=a.charCodeAt(d)<<16-g%4*8,g+=2;return{value:e,binLen:8*g}}function e(a){var b,c,d=[],e=a.length;if(0!=e%2)throw"String of HEX type must be in byte increments";for(b=0;b<e;b+=2){if(c=parseInt(a.substr(b,2),16),isNaN(c))throw"String of HEX type contains invalid characters";d[b>>>3]|=c<<24-b%8*4}return{value:d,binLen:4*e}}function f(a){var b,c,d,e,f,g=[],h=0;if(-1===a.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(b=a.indexOf("="),a=a.replace(/\=/g,""),-1!==b&&b<a.length)throw"Invalid '=' found in base-64 string";for(c=0;c<a.length;c+=4){for(f=a.substr(c,4),d=e=0;d<f.length;d+=1)b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f[d]),e|=b<<18-6*d;for(d=0;d<f.length-1;d+=1)g[h>>2]|=(e>>>16-8*d&255)<<24-h%4*8,h+=1}return{value:g,binLen:8*h}}function g(a,b){var c,d,e="",f=4*a.length;for(c=0;c<f;c+=1)d=a[c>>>2]>>>8*(3-c%4),e+="0123456789abcdef".charAt(d>>>4&15)+"0123456789abcdef".charAt(15&d);return b.outputUpper?e.toUpperCase():e}function h(a,b){var c,d,e,f="",g=4*a.length;for(c=0;c<g;c+=3)for(e=(a[c>>>2]>>>8*(3-c%4)&255)<<16|(a[c+1>>>2]>>>8*(3-(c+1)%4)&255)<<8|a[c+2>>>2]>>>8*(3-(c+2)%4)&255,d=0;4>d;d+=1)f=8*c+6*d<=32*a.length?f+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-d)&63):f+b.b64Pad;return f}function i(a){var b={outputUpper:!1,b64Pad:"="};try{a.hasOwnProperty("outputUpper")&&(b.outputUpper=a.outputUpper),a.hasOwnProperty("b64Pad")&&(b.b64Pad=a.b64Pad)}catch(a){}if("boolean"!=typeof b.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof b.b64Pad)throw"Invalid b64Pad formatting option";return b}function j(a,b){return a<<b|a>>>32-b}function k(a,b){return a>>>b|a<<32-b}function l(a,b){var d=null,d=new c(a.a,a.b);return d=32>=b?new c(d.a>>>b|d.b<<32-b&4294967295,d.b>>>b|d.a<<32-b&4294967295):new c(d.b>>>b-32|d.a<<64-b&4294967295,d.a>>>b-32|d.b<<64-b&4294967295)}function m(a,b){return 32>=b?new c(a.a>>>b,a.b>>>b|a.a<<32-b&4294967295):new c(0,a.a>>>b-32)}function n(a,b,c){return a^b^c}function o(a,b,c){return a&b^~a&c}function p(a,b,d){return new c(a.a&b.a^~a.a&d.a,a.b&b.b^~a.b&d.b)}function q(a,b,c){return a&b^a&c^b&c}function r(a,b,d){return new c(a.a&b.a^a.a&d.a^b.a&d.a,a.b&b.b^a.b&d.b^b.b&d.b)}function s(a){return k(a,2)^k(a,13)^k(a,22)}function t(a){var b=l(a,28),d=l(a,34);return a=l(a,39),new c(b.a^d.a^a.a,b.b^d.b^a.b)}function u(a){return k(a,6)^k(a,11)^k(a,25)}function v(a){var b=l(a,14),d=l(a,18);return a=l(a,41),new c(b.a^d.a^a.a,b.b^d.b^a.b)}function w(a){return k(a,7)^k(a,18)^a>>>3}function x(a){var b=l(a,1),d=l(a,8);return a=m(a,7),new c(b.a^d.a^a.a,b.b^d.b^a.b)}function y(a){return k(a,17)^k(a,19)^a>>>10}function z(a){var b=l(a,19),d=l(a,61);return a=m(a,6),new c(b.a^d.a^a.a,b.b^d.b^a.b)}function A(a,b){var c=(65535&a)+(65535&b);return((a>>>16)+(b>>>16)+(c>>>16)&65535)<<16|65535&c}function B(a,b,c,d){var e=(65535&a)+(65535&b)+(65535&c)+(65535&d);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)&65535)<<16|65535&e}function C(a,b,c,d,e){var f=(65535&a)+(65535&b)+(65535&c)+(65535&d)+(65535&e);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)+(f>>>16)&65535)<<16|65535&f}function D(a,b){var d,e,f;return d=(65535&a.b)+(65535&b.b),e=(a.b>>>16)+(b.b>>>16)+(d>>>16),f=(65535&e)<<16|65535&d,d=(65535&a.a)+(65535&b.a)+(e>>>16),e=(a.a>>>16)+(b.a>>>16)+(d>>>16),new c((65535&e)<<16|65535&d,f)}function E(a,b,d,e){var f,g,h;return f=(65535&a.b)+(65535&b.b)+(65535&d.b)+(65535&e.b),g=(a.b>>>16)+(b.b>>>16)+(d.b>>>16)+(e.b>>>16)+(f>>>16),h=(65535&g)<<16|65535&f,f=(65535&a.a)+(65535&b.a)+(65535&d.a)+(65535&e.a)+(g>>>16),g=(a.a>>>16)+(b.a>>>16)+(d.a>>>16)+(e.a>>>16)+(f>>>16),new c((65535&g)<<16|65535&f,h)}function F(a,b,d,e,f){var g,h,i;return g=(65535&a.b)+(65535&b.b)+(65535&d.b)+(65535&e.b)+(65535&f.b),h=(a.b>>>16)+(b.b>>>16)+(d.b>>>16)+(e.b>>>16)+(f.b>>>16)+(g>>>16),i=(65535&h)<<16|65535&g,g=(65535&a.a)+(65535&b.a)+(65535&d.a)+(65535&e.a)+(65535&f.a)+(h>>>16),h=(a.a>>>16)+(b.a>>>16)+(d.a>>>16)+(e.a>>>16)+(f.a>>>16)+(g>>>16),new c((65535&h)<<16|65535&g,i)}function G(a,b){var c,d,e,f,g,h,i,k,l,m=[],p=o,r=n,s=q,t=j,u=A,v=C,w=[1732584193,4023233417,2562383102,271733878,3285377520];for(a[b>>>5]|=128<<24-b%32,a[15+(b+65>>>9<<4)]=b,l=a.length,i=0;i<l;i+=16){for(c=w[0],d=w[1],e=w[2],f=w[3],g=w[4],k=0;80>k;k+=1)m[k]=16>k?a[k+i]:t(m[k-3]^m[k-8]^m[k-14]^m[k-16],1),h=20>k?v(t(c,5),p(d,e,f),g,1518500249,m[k]):40>k?v(t(c,5),r(d,e,f),g,1859775393,m[k]):60>k?v(t(c,5),s(d,e,f),g,2400959708,m[k]):v(t(c,5),r(d,e,f),g,3395469782,m[k]),g=f,f=e,e=t(d,30),d=c,c=h;w[0]=u(c,w[0]),w[1]=u(d,w[1]),w[2]=u(e,w[2]),w[3]=u(f,w[3]),w[4]=u(g,w[4])}return w}function H(a,b,d){var e,f,g,h,i,j,k,l,m,n,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W=[],X=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];if(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],f=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],"SHA-224"===d||"SHA-256"===d)G=64,e=15+(b+65>>>9<<4),J=16,K=1,U=Number,L=A,M=B,N=C,O=w,P=y,Q=s,R=u,T=q,S=o,n="SHA-224"===d?n:f;else{if("SHA-384"!==d&&"SHA-512"!==d)throw"Unexpected error in SHA-2 implementation";G=80,e=31+(b+128>>>10<<5),J=32,K=2,U=c,L=D,M=E,N=F,O=x,P=z,Q=t,R=v,T=r,S=p,X=[new U(X[0],3609767458),new U(X[1],602891725),new U(X[2],3964484399),new U(X[3],2173295548),new U(X[4],4081628472),new U(X[5],3053834265),new U(X[6],2937671579),new U(X[7],3664609560),new U(X[8],2734883394),new U(X[9],1164996542),new U(X[10],1323610764),new U(X[11],3590304994),new U(X[12],4068182383),new U(X[13],991336113),new U(X[14],633803317),new U(X[15],3479774868),new U(X[16],2666613458),new U(X[17],944711139),new U(X[18],2341262773),new U(X[19],2007800933),new U(X[20],1495990901),new U(X[21],1856431235),new U(X[22],3175218132),new U(X[23],2198950837),new U(X[24],3999719339),new U(X[25],766784016),new U(X[26],2566594879),new U(X[27],3203337956),new U(X[28],1034457026),new U(X[29],2466948901),new U(X[30],3758326383),new U(X[31],168717936),new U(X[32],1188179964),new U(X[33],1546045734),new U(X[34],1522805485),new U(X[35],2643833823),new U(X[36],2343527390),new U(X[37],1014477480),new U(X[38],1206759142),new U(X[39],344077627),new U(X[40],1290863460),new U(X[41],3158454273),new U(X[42],3505952657),new U(X[43],106217008),new U(X[44],3606008344),new U(X[45],1432725776),new U(X[46],1467031594),new U(X[47],851169720),new U(X[48],3100823752),new U(X[49],1363258195),new U(X[50],3750685593),new U(X[51],3785050280),new U(X[52],3318307427),new U(X[53],3812723403),new U(X[54],2003034995),new U(X[55],3602036899),new U(X[56],1575990012),new U(X[57],1125592928),new U(X[58],2716904306),new U(X[59],442776044),new U(X[60],593698344),new U(X[61],3733110249),new U(X[62],2999351573),new U(X[63],3815920427),new U(3391569614,3928383900),new U(3515267271,566280711),new U(3940187606,3454069534),new U(4118630271,4000239992),new U(116418474,1914138554),new U(174292421,2731055270),new U(289380356,3203993006),new U(460393269,320620315),new U(685471733,587496836),new U(852142971,1086792851),new U(1017036298,365543100),new U(1126000580,2618297676),new U(1288033470,3409855158),new U(1501505948,4234509866),new U(1607167915,987167468),new U(1816402316,1246189591)],n="SHA-384"===d?[new U(3418070365,n[0]),new U(1654270250,n[1]),new U(2438529370,n[2]),new U(355462360,n[3]),new U(1731405415,n[4]),new U(41048885895,n[5]),new U(3675008525,n[6]),new U(1203062813,n[7])]:[new U(f[0],4089235720),new U(f[1],2227873595),new U(f[2],4271175723),new U(f[3],1595750129),new U(f[4],2917565137),new U(f[5],725511199),new U(f[6],4215389547),new U(f[7],327033209)]}for(a[b>>>5]|=128<<24-b%32,a[e]=b,V=a.length,H=0;H<V;H+=J){for(b=n[0],e=n[1],f=n[2],g=n[3],h=n[4],i=n[5],j=n[6],k=n[7],I=0;I<G;I+=1)W[I]=16>I?new U(a[I*K+H],a[I*K+H+1]):M(P(W[I-2]),W[I-7],O(W[I-15]),W[I-16]),l=N(k,R(h),S(h,i,j),X[I],W[I]),m=L(Q(b),T(b,e,f)),k=j,j=i,i=h,h=L(g,l),g=f,f=e,e=b,b=L(l,m);n[0]=L(b,n[0]),n[1]=L(e,n[1]),n[2]=L(f,n[2]),n[3]=L(g,n[3]),n[4]=L(h,n[4]),n[5]=L(i,n[5]),n[6]=L(j,n[6]),n[7]=L(k,n[7])}if("SHA-224"===d)a=[n[0],n[1],n[2],n[3],n[4],n[5],n[6]];else if("SHA-256"===d)a=n;else if("SHA-384"===d)a=[n[0].a,n[0].b,n[1].a,n[1].b,n[2].a,n[2].b,n[3].a,n[3].b,n[4].a,n[4].b,n[5].a,n[5].b];else{if("SHA-512"!==d)throw"Unexpected error in SHA-2 implementation";a=[n[0].a,n[0].b,n[1].a,n[1].b,n[2].a,n[2].b,n[3].a,n[3].b,n[4].a,n[4].b,n[5].a,n[5].b,n[6].a,n[6].b,n[7].a,n[7].b]}return a}"function"!=typeof define||(define.amd,0)?"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=b:exports=b:a.jsSHA=b:define(function(){return b})}(this);var createNonceStr=function(){return Math.random().toString(36).substr(2,15)},createTimestamp=function(){return parseInt((new Date).getTime()/1e3)+""},raw=function(a){var b=Object.keys(a);b=b.sort();var c={};b.forEach(function(b){c[b.toLowerCase()]=a[b]});var d="";for(var e in c)d+="&"+e+"="+c[e];return d=d.substr(1)};sign=function(a,b){var c={jsapi_ticket:a,nonceStr:createNonceStr(),timestamp:createTimestamp(),url:b},d=raw(c);return shaObj=new jsSHA(d,"TEXT"),c.signature=shaObj.getHash("SHA-1","HEX"),c},appName="Stick 'N Collect",merchantIcon="//"+window.location.host+"/rustans/share/images/app_icon.png",listHomePage="/listHomePage.do",getNewestCampaign="/getNewestCampaign.do",listPromotion="/listPromotion.do",listCampaign="/listCampaign.do",getUserStampCard="/getUserStampCard.do",listUserStamp="/listUserStamp.do",listUserCoupon="/listUserCoupon.do",listGift="/listGift.do",getGiftDetail="/getGiftDetail.do",getUserGiftRedeemCode="/getUserGiftRedeemCode.do",getUserGiftRedeemMsg="/getUserGiftRedeemMsg.do",getUserCollectStampMsg="/getUserCollectStampMsg.do",clearCollectCodeStatus="/clearCollectCodeStatus.do",listUserReservation="/listUserReservation.do",saveUserReservation="/saveUserReservation.do",listStore="/listStore.do",listMerchantArea="/listMerchantArea.do",listUserFriend="/listUserFriend.do",transferStamp="/transferStamp.do",acceptFriend="/acceptFriend.do",deleteFriendRequset="/deleteFriendRequset.do",searchFriendsByName="/searchFriendsByName.do",addFriend="/addFriend.do",getCampaignDetail="/getCampaignDetail.do",register="/register.do",login="/login.do",logout="/logout.do",getUserPofile="/getUserPofile.do",updateUserPofile="/updateUserPofile.do",forgetUserPassword="/forgetUserPassword.do",resetUserPassword="/resetUserPassword.do",resendActiveEmail="/resendActiveEmail.do",getMerchantDetail="/getMerchantDetail.do",clearUserReservationCodeStatus="/clearUserReservationCodeStatus.do",getUserReservationMsg="/getUserReservationMsg.do",listPromotion="/listPromotion.do",registerDeviceToken="/registerDeviceToken.do",updateUserIcon="/updateUserIcon.do",listUserStampHistory="/listUserStampHistory.do",listUserRedeemHistory="/listUserRedeemHistory.do",grantUserStamp="/grantUserStamp.do",sendIquiryEmail="/sendIquiryEmail.do",resetRegistrationEamil="/resetRegistrationEamil.do",checkoutUserPassword="/checkoutUserPassword.do",changeUserPassword="/changeUserPassword.do",saveShareData="/saveShareData.do",listHistoryUnReadStatus="/listHistoryUnReadStatus.do",getCouponDetail="/getCouponDetail.do",saveUserCoupon="/saveUserCoupon.do",listCoupon="/listCoupon.do",saveUserAllCoupon="/saveUserAllCoupon.do",getTempUser="/getTempUser.do",sendSms="/sendSms.do",verifySms="/verifySms.do",newRegister="/newRegister.do",uploadUserIcon="/uploadUserIcon.do",newLogin="/newLogin.do",checkIsExistFbAccount="/checkIsExistFbAccount.do",changePhone="/changePhone.do",resendSms="/resendSms.do",registerTempEmailUser="/registerTempEmailUser.do",verifyLoginEmail="/verifyLoginEmail.do",updateUserMarketingInfo="/updateUserMarketingInfo.do";const QRCODE_DEFAULT_SIZE=160,QRCODE_DEFAULT_COLOR="#000000",QRCODE_DEFAULT_BG_COLOR="#fffffff",QRCODE_DEFAULT_CORRECT_LEVEL=3,QRCODE_DEFAULT_RENDER="div",MERCHANTLIST_SEARCH_TYPE=1,AJAX_TYPE="POST",OWNED_BY_MERCHANT_ID=1,PAST_BY_MERCHANT_ID=2,PUNCH_CARD_STATE_ACTIVE=1,PUNCH_CARD_STATE_COMPLETED=2,G_CLIENT_ID="127414ac0bcd4564afb428b01398316c",BASE_DIALOG_CTRL_NAME="BaseDialogCtrl",EVENT_EXIT_WEBVIEW="EVENT_EXIT_WEBVIEW",EVENT_OPEN_URL="EVENT_OPEN_URL",SUCCESS_STATUS=0,SESSION_EXCEPTION=-6,USER_NOT_FOUND_EXCEPTION=-600,USER_TYPE_OUT_OF_RANGE_EXCEPTION=-607,APP_NAME="Shoppo GA",GA_PAGE_VIEW="Page View",KOL_IMAGES={admin:"../images/z2.jpg",kimmy:"../images/z1.jpg",DEFAULT_GIRL:"../images/z1.jpg"},KOL_BGIMAGES={admin:"../images/KOL_bg2.jpg",kimmy:"../images/KOL_bg1.jpg",DEFAULT_GIRL:"../images/KOL_bg1.jpg"};isCloseWindow=!1,$(window).ajaxError(function(a,b,c,d){var e="";b.readyState,e="Network error. Please try again later.",-1!=c.url.indexOf("getVerifyCode.do")||angular.element("body").scope().$root.warningDlg({msg:e})}).ajaxStart(function(){$(".loader").show()}).ajaxStop(function(){setTimeout(function(){$(".loader").hide()},500)});var shoppoweb;!function(){shoppoweb=angular.module("shoppoweb",["ui.router","oc.lazyLoad","ngSanitize","pascalprecht.translate","ngDialog","ngTouch"])}();var factoryVal={topBar:{showTopBar:!1,topBarTitle:"",showBackBtn:!1,backBtnTitle:"<",showShareBtn:!1,shareBtnTitle:"share",showSearchBtn:!1,searchBtnTitle:"",showMenuBtn:!1,menuBtnTitle:"",lastPage:"",showAddFirendBtn:!1},checkEmailTest:/^(\w)+((\.|\-)\w+)*@(\w)+((\.\w+)+)$/,phoneDistrictCode:["Afghanistan +93","Albania +355","Algeria +213","American Samoa +1684","Andorra +376","Angola +244","Anguilla +1264","Antarctica +672","Antigua and Barbuda +1268","Argentina +54","Armenia +374","Aruba +297","Australia +61","Austria +43","Azerbaijan +994","Bahamas +1242","Bahrain +973","Bangladesh +880","Barbados +1246","Belarus +375","Belgium +32","Belize +501","Benin +229","Bermuda +1441","Bhutan +975","Bolivia +591","Bosnia and Herzegovina +387","Botswana +267","Brazil +55","British Indian Ocean Territory +246","British Virgin Islands +1284","Brunei +673","Bulgaria +359","Burkina Faso +226","Burundi +257","Cambodia +855","Cameroon +237","Canada +1","Cape Verde +238","Cayman Islands +1345","Central African Republic +236","Chad +235","Chile +56","Christmas Island +61","Cocos Islands +61","Colombia +57","Comoros +269","Cook Islands +682","Costa Rica +506","Croatia +385","Cuba +53","Curacao +599","Cyprus +357","Czech Republic +420","Democratic Republic of the Congo +243","Denmark +45","Djibouti +253","Dominica +1767","Dominican Republic +1829","Dominican Republic +1809","Dominican Republic +1849","East Timor +670","Ecuador +593","Egypt +20","El Salvador +503","Equatorial Guinea +240","Eritrea +291","Estonia +372","Ethiopia +251","Falkland Islands +500","Faroe Islands +298","Fiji +679","Finland +358","France +33","French Polynesia +689","Gabon +241","Gambia +220","Georgia +995","Germany +49","Ghana +233","Gibraltar +350","Greece +30","Greenland +299","Grenada +1473","Guam +1671","Guatemala +502","Guernsey +441481","Guinea +224","Guinea-Bissau +245","Guyana +592","Haiti +509","Honduras +504","Hong Kong +852","Hungary +36","Iceland +354","India +91","Indonesia +62","Iran +98","Iraq +964","Ireland +353","Isle of Man +441624","Israel +972","Italy +39","Ivory Coast +225","Jamaica +1876","Japan +81","Jersey +441534","Jordan +962","Kazakhstan +7","Kenya +254","Kiribati +686","Kosovo +383","Kuwait +965","Kyrgyzstan +996","Laos +856","Latvia +371","Lebanon +961","Lesotho +266","Liberia +231","Libya +218","Liechtenstein +423","Lithuania +370","Luxembourg +352","Macau +853","Macedonia +389","Madagascar +261","Malawi +265","Malaysia +60","Maldives +960","Mali +223","Malta +356","Marshall Islands +692","Mauritania +222","Mauritius +230","Mayotte +262","Mexico +52","Micronesia +691","Moldova +373","Monaco +377","Mongolia +976","Montenegro +382","Montserrat +1664","Morocco +212","Mozambique +258","Myanmar +95","Namibia +264","Nauru +674","Nepal +977","Netherlands +31","Netherlands Antilles +599","New Caledonia +687","New Zealand +64","Nicaragua +505","Niger +227","Nigeria +234","Niue +683","North Korea +850","Northern Mariana Islands +1670","Norway +47","Oman +968","Pakistan +92","Palau +680","Palestine +970","Panama +507","Papua New Guinea +675","Paraguay +595","Peru +51","Philippines +63","Pitcairn +64","Poland +48","Portugal +351","Puerto Rico +1787","Puerto Rico +1939","Qatar +974","Republic of the Congo +242","Reunion +262","Romania +40","Russia +7","Rwanda +250","Saint Barthelemy +590","Saint Helena +290","Saint Kitts and Nevis +1869","Saint Lucia +1758","Saint Martin +590","Saint Pierre and Miquelon +508","Saint Vincent and the Grenadines +1784","Samoa +685","San Marino +378","Sao Tome and Principe +239","Saudi Arabia +966","Senegal +221","Serbia +381","Seychelles +248","Sierra Leone +232","Singapore +65","Sint Maarten +1721","Slovakia +421","Slovenia +386","Solomon Islands +677","Somalia +252","South Africa +27","South Korea +82","South Sudan +211","Spain +34","Sri Lanka +94","Sudan +249","Suriname +597","Svalbard and Jan Mayen +47","Swaziland +268","Sweden +46","Switzerland +41","Syria +963","Taiwan +886","Tajikistan +992","Tanzania +255","Thailand +66","Togo +228","Tokelau +690","Tonga +676","Trinidad and Tobago +1868","Tunisia +216","Turkey +90","Turkmenistan +993","Turks and Caicos Islands +1649","Tuvalu +688","U.S. Virgin Islands +1340","Uganda +256","Ukraine +380","United Arab Emirates +971","United Kingdom +44","United States +1","Uruguay +598","Uzbekistan +998","Vanuatu +678","Vatican +379","Venezuela +58","Vietnam +84","Wallis and Futuna +681","Western Sahara +212","Yemen +967","Zambia +260","Zimbabwe +263"],userInfo:{userId:"",userName:"",lang:"en"},token:"",merchantDetail:{logo:"images/profilepic_logo_defaultpic @2x.png",coverImage:"images/wallpaper_defaultpic@2x.png"},merchantListTab:3,wechatCode:"",isBreak:!0,showGotoTop:!1,scorllTopList:{merchantDetail:0},city:"上海市",province:"上海市"},factoryFn=function(){return factoryVal},app=angular.module("shoppoweb");app.factory("form",factoryFn),app.config(["$stateProvider","$urlRouterProvider","$ocLazyLoadProvider",config]),app.run(["$rootScope","$location","$state","$timeout","form","shoppoDialog","$window",function(a,b,c,d,e,f,g){a.$state=c,a.form=e,a.goLanding=function(){localStorage.removeItem("userInfo"),a.form.userInfo={},b.path("main/login")},a.warningDlg=function(b){b=b||{},b.msg=b.msg||"",a.msg=b.msg,f(a,{template:"warningDlg.html",preCloseCallback:angular.loop})},a.gotoLoginTip=function(a){d(function(){"undefined"!=typeof keewee2JSInterface&&keewee2JSInterface.verifiedUserOnly()},200)},a.$on("$locationChangeStart",function(b,c,d){$(".loader").show(),a.form.isBreak=!1,a.form.isSearch=!1,a.form.showGotoTop=!1,$(".searchRecord").removeClass("on");try{a.form.closeDialog()}catch(a){}}),a.$on("$requestError",function(b,c,d){a.warningDlg({msg:"Network error. Please try again later."}),setTimeout(function(){$(".loader").hide()},500)}),a.setTopTitle=function(b){for(var c=0;c<a.form.sideMenus.length;c++)b.indexOf(a.form.sideMenus[c].url)>=0&&(a.form.topBar.topBarTitle=a.form.sideMenus[c].name,a.form.onChoose=a.form.sideMenus[c].name);a.form.topBar.topBarTitle&&(a.form.topBar.showTopBar=!0,a.form.topBar.showMenuBtn=!0,a.form.topBar.showSearchBtn=!0)},a.$on("$locationChangeSuccess",function(b,c,d){a.form.topBar={showTopBar:!0,topBarTitle:"",showBackBtn:!1,backBtnTitle:"<",showShareBtn:!1,shareBtnTitle:"share",showSearchBtn:!1,searchBtnTitle:"",showMenuBtn:!1,menuBtnTitle:"",lastPage:"",showAddFirendBtn:!1},a.form.sideMenus&&a.setTopTitle(c),setTimeout(function(){$(".loader").hide(),fixHeight()},500);var e=c.substring(c.indexOf("#")+1);null!=e&&(e=e.replace(/rnd=[\w|.]*(&|$)/,""),g.ga("send","pageview",e))}),a.$on("$routeChangeStart",function(b,c,d){$(".loading").html(loadingHtml),$(".loading").show(),a.form=e,a.form.isLoad=!0}),a.$on("$routeChangeError",function(b,c,d){a.warningDlg({msg:"Network error. Please try again later."},function(){$route.reload()})})}]),shoppoweb.config(["$provide",function(a){a.factory("shoppoDialog",["ngDialog","$controller",function(a,b){return function(b,c){var d=["$scope","$translate","form",function(b,c,d){b.form.closeDialog=function(){a.close()}}],e={templateUrl:"pages/common/qrCodeDlg.html",scope:b,controller:d,showClose:!1,trapFocus:!1,disableAnimation:!0,preCloseCallback:angular.noop};angular.extend(e,c),a.open(e)}}])}]);var formatDate=function(a){},formatDateToCN=function(a){var b=a.split("-"),c=new Date(b[0]-0),d=[c.getFullYear(),c.getMonth()+1,c.getDate()],e=new Date(b[1]-0),f=[e.getFullYear(),e.getMonth()+1,e.getDate()],g="";return d[0]==f[0]?(g+=d[0]+"年",d[1]==f[1]?(g+=d[1]+"月",g+=d[2]+"日至"+f[2]+"日"):g+=d[1]+"月"+d[2]+"日至"+f[1]+"月"+f[2]+"日"):g=d[0]+"年"+d[1]+"月"+d[2]+"日至"+f[0]+"年"+f[1]+"月"+f[2]+"日",g};app.filter("dateFilter",function(){return function(a){return formatDateToCN(a)}});var sendGAEvent=function(a,b,c,d,e){if("undefined"!=typeof keewee2JSInterface){var f={eventLabel:a,eventCategory:b,eventAction:c,remark:d,customDimensions:e},g=JSON.stringify(f);alert(g),keewee2JSInterface.sendGAEvent(g)}if("undefined"!=typeof ga&&(console.log("sendGAEvent"),ga("send",{hitType:"event",eventCategory:b,eventAction:c,eventLabel:a,eventValue:d})),"undefined"!=typeof _hmt)if(e.length>0&&_hmt.push(["_setCustomVar",1,"param",JSON.stringify(e),SCOPE_THIS_ACTION]),b==GA_PAGE_VIEW){var h=window.location.hash.replace("#","/");""!=h&&_hmt.push(["_trackPageview",h])}else _hmt.push(["_trackEvent",b,c,a,d]);"undefined"!=typeof _czc&&(e.length>0&&_czc.push(["_setCustomVar",1,"param",JSON.stringify(e),SCOPE_THIS_ACTION]),b==GA_PAGE_VIEW?_czc.push(["_trackPageview",a]):_czc.push(["_trackEvent",b,c,a,d]))},fixHeight=function(){var a=$(window).height();setTimeout(function(){$(".main-content").hasClass("have-top-bar")?$(".bottom-menu").hasClass("ng-hide")?($(".main-content").height(a-60),$(".mainPage-content").css("height",$(".main-content").height()-167+"px")):($(".main-content").height(a-125),$(".mainPage-content").css("height",$(".main-content").height()-167+"px")):$(".main-content").height(a)},500)},fixedPosition=function(a,b){var c=$(window).height(),a="."+a,b=b;setTimeout(function(){$(".main-content").hasClass("have-top-bar")?$(a).height(c-b-60):$(a).height(c-b)},100)},back=function(){$("#iframed").empty(),$("#home").css("display","block")},formatDate=function(a,b){var c;b.indexOf(".")>0?c=".":b.indexOf("-")>0?c="-":b.indexOf("/")>0&&(c="/");var d=a.split(/[. -/:]/);d[3]||(d[3]="00"),d[4]||(d[4]="00"),d[5]||(d[5]="00");var e=new Date(d[0],d[1]-1,d[2],d[3],d[4],d[5]),f=e.getFullYear(),g=f.toString().substring(2),h=e.getMonth()+1;h<10&&(h="0"+h);var i=e.getDate();i<10&&(i="0"+i);for(var j=b.split(/[-. \\/]/),k="",l=0;l<j.length;l++)"dd"==j[l]?k+=i+c:"YYYY"==j[l]?k+=f+c:"MM"==j[l]?k+=h+c:"YY"==j[l]&&(k+=g+c);return k.slice(0,k.length-1)},getTimeStamp=function(a){var b=a.split(/[. -/:]/);return b[3]||(b[3]="00"),b[4]||(b[4]="00"),b[5]||(b[5]="00"),new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5]).valueOf()},getHourEvent=function(a){var b=a.split(/[. -/:]/);b[3]||(b[3]="00"),b[4]||(b[4]="00"),b[5]||(b[5]="00");var c=new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5]);return c.getHours()<10?"0"+c.getHours():c.getHours()},getMinuteEvent=function(a){var b=a.split(/[. -/:]/);b[3]||(b[3]="00"),b[4]||(b[4]="00"),b[5]||(b[5]="00");var c=new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5]);return c.getMinutes()<10?"0"+c.getMinutes():c.getMinutes()};angular.module("shoppoweb").directive("onLastRepeat",[onLastRepeat]).directive("checkBox",[checkBox]),angular.module("shoppoweb").config(["$translateProvider",config2]);var maxNameLen=5,pageSize=10,totalCount=1e3,MaxMsgLen={C2C:12e3,GROUP:8898},SessionType={C2C:"C2C",GROUP:"GROUP"},selType=SessionType.GROUP,selToID=null,selSess=null,curMsgCount=0,emotionFlag=!1,UploadPicBussinessType={GROUP_MSG:1,C2C_MSG:2,USER_HEAD:3,GROUP_HEAD:4},curPlayAudio=null,TlsErrorCode={OK:0,SIGNATURE_EXPIRATION:11},friendHeadUrl="images/2017.jpg",listeners={onConnNotify:null,jsonpCallback:jsonpCallback,onMsgNotify:onMsgNotify},merchantName="",merchantLogo="",userImg="";