function registrationEmailCtrl(a,b,c,d,e,f,g,h){b.form=f,b.form.topBar.showTopBar=!0,b.form.topBar.topBarTitle=d.instant("Registration"),b.form.topBar.showBackBtn=!0,b.form.topBar.showLoginBtn=!0,b.form.bottomMenu=!1,b.form.loginEmail?b.loginEmail=b.form.loginEmail:b.loginEmail="",b.form.confirmEmail?b.confirmEmail=b.form.confirmEmail:b.confirmEmail="",b.form.password?b.password=b.form.password:b.password="",b.form.confirmPassword?b.confirmPassword=b.form.confirmPassword:b.confirmPassword="",b.form.fromRegistrationEmail=!1,b.form.fromRegistration?b.form.topBar.lastPage="/main/registration":b.form.isFromLandingPage?b.form.topBar.lastPage="/main/landing":b.form.isFromStampCard?b.form.topBar.lastPage="/main/stampsCard":b.form.isFromReservation?b.form.topBar.lastPage="/main/user":b.form.isFromMore?b.form.topBar.lastPage="/main/more":b.form.isFromUser?b.form.topBar.lastPage="/main/user":b.form.topBar.lastPage="/main/landing",b.viewPassword=!0,b.viewConfirmPassword=!0,b.changeViewPassword=function(){b.viewPassword?b.viewPassword=!1:b.viewPassword=!0},b.changeViewConfirmPassword=function(){b.viewConfirmPassword?b.viewConfirmPassword=!1:b.viewConfirmPassword=!0},jQuery.validator.addMethod("checkSpace",function(a,b,c){return 0!=a.replace(/\s/g,"").length},$.validator.format("This field is required.")),jQuery.validator.addMethod("checkPassword",function(a,b,c){return 0==a.replace(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,15}$/,"").length},$.validator.format("Invalid password. Please try again.")),jQuery.validator.addMethod("checkConfirmEmail",function(a,c,d){return a==b.loginEmail},$.validator.format("Email not match,please try again")),jQuery.validator.addMethod("checkConfirmPassword",function(a,c,d){return a==b.password},$.validator.format("Password didnâ€™t match.")),$("#registraion").validate({errorPlacement:function(a,b){b.after(a)},rules:{loginEmail:{required:!1,checkSpace:!0},confirmEmail:{required:!1,checkSpace:!0,checkConfirmEmail:!0},password:{required:!1,checkSpace:!0,checkPassword:!0},confirmPassword:{required:!1,checkSpace:!0,checkConfirmPassword:!0}},messages:{},submitHandler:function(a){b.register(1)}}),b.$watch(function(){return $(".loginEmail").val()},function(a,b){$(".loginEmail").val(trim(a))}),b.$watch(function(){return $(".confirmEmail").val()},function(a,b){$(".confirmEmail").val(trim(a))}),b.submitEvent=function(){$("#registraion").submit()},b.$root.gotoLastPage=function(){b.form.isFromLandingPage=!1,b.form.isFromStampCard=!1,b.form.isFromReservation=!1,b.form.isFromMore=!1,b.form.isFromUser=!1,g(function(){c.path(b.form.topBar.lastPage)},200)},b.$root.gotoLogin=function(){b.form.isFromRegister=!0,b.form.loginEmail=b.loginEmail,b.form.confirmEmail=b.confirmEmail,b.form.password=b.password,b.form.confirmPassword=b.confirmPassword,g(function(){c.path("main/login")},200)},b.agreeTC=!1,b.form.isMarketingInfo=0,b.agreeTCFn=function(){b.agreeTC?b.agreeTC=!1:b.agreeTC=!0},b.isMarketingInfoFn=function(){1==b.form.isMarketingInfo?b.form.isMarketingInfo=0:b.form.isMarketingInfo=1},b.facebookIsReady=!0,b.facebookLogin=function(){getfaceBookUserInfo=function(a){b.form.facebookInfo=JSON.parse(a.result),b.checkFbEvent(3)},1==b.form.isInApp&&(window.location.href="tcc://shoppo?func=facebookLogin&callback=getfaceBookUserInfo")},b.gotoPrivacy=function(){b.form.loginEmail=b.loginEmail,b.form.confirmEmail=b.confirmEmail,b.form.password=b.password,b.form.confirmPassword=b.confirmPassword,b.form.fromRegistrationEmail=!0,"en_US"==d.use()&&c.path("/main/privacy_en_US")},b.gotoTAndC=function(){b.form.loginEmail=b.loginEmail,b.form.confirmEmail=b.confirmEmail,b.form.password=b.password,b.form.confirmPassword=b.confirmPassword,b.form.fromRegistrationEmail=!0,"en_US"==d.use()&&c.path("/main/tAndC_en_US")},b.reset=function(){b.form.loginEmail="",b.form.confirmEmail="",b.form.password="",b.form.confirmPassword=""},b.gotoLanding=function(){g(function(){c.path("/main/landing")},200)},b.gotoSetProFile=function(){g(function(){c.path("/main/setProfile")},200)},b.gotoRegister=function(){g(function(){c.path("/main/registration")},200)},b.register=function(a){var d=copyData(b.form.userInfo);d.registerType=a,d.langCode=b.form.userInfo.langCode,d.email=b.loginEmail,d.password=b.password;var e=apiDomain+registerTempEmailUser;$.ajax({type:AJAX_TYPE,data:d,url:e,context:document.body,success:function(a){apiResultsProcessingFun(a,function(){b.form.email=b.loginEmail,b.form.userInfo.email=b.loginEmail,c.path("/main/emailVerification"),b.$apply()})}})},b.checkFbEvent=function(){var a=copyData(b.form.userInfo);a.snsId=b.form.facebookInfo.id,a.snsType=1,a.snsAccessToken=b.form.facebookInfo.token;var c=apiDomain+checkIsExistFbAccount;$.ajax({type:AJAX_TYPE,url:c,context:document.body,data:a,success:function(a){apiResultsProcessingFun(a,function(){1==a.result?b.loginEvent(3):(b.form.registerType=3,b.gotoSetProFile()),b.$apply()})}})},b.loginEvent=function(a){var c=copyData(b.form.userInfo);c.loginType=a,c.snsId=b.form.facebookInfo.id,c.snsType=1,c.snsAccessToken=b.form.facebookInfo.token;var d=apiDomain+newLogin;$.ajax({type:AJAX_TYPE,url:d,context:document.body,data:c,success:function(c){apiResultsProcessingFun(c,function(){b.form.userInfo=c.result,b.form.getDeviceToken(),b.form.getUserPofile(a),b.$apply()})}})},b.init=function(){},b.init()}var RegistrationEmailCtrl=["$filter","$scope","$location","$translate","$state","form","$timeout","shoppoDialog",registrationEmailCtrl];angular.module("shoppoweb").controller("RegistrationEmailCtrl",RegistrationEmailCtrl);