function resetRegisterEmailCtrl(a,b,c,d,e,f,g){a.form=f,a.form.topBar.topBarTitle=c.instant("resetRegitrationEmail"),a.form.topBar.showTopBar=!0,a.form.topBar.lastPage="main/accountManagement",a.form.topBar.showBackBtn=!0,a.form.bottomMenu=!1,a.verifyPassword=!1,a.$root.gotoLastPage=function(){e(function(){b.path(a.form.topBar.lastPage)},200)},a.checkoutUserPassword=function(){var b=copyData(a.form.userInfo);b.password=a.password;var c=apiDomain+checkoutUserPassword;$.ajax({type:AJAX_TYPE,url:c,context:document.body,data:b,success:function(b){apiResultsProcessingFun(b,function(){1==b.result&&(a.verifyPassword=!0),a.$apply()})}})},a.resetRegistrationEamil=function(){var b=copyData(a.form.userInfo);b.email=a.email;var c=apiDomain+resetRegistrationEamil;$.ajax({type:AJAX_TYPE,url:c,context:document.body,data:b,success:function(b){apiResultsProcessingFun(b,function(){1==b.result&&a.resetEmailSuccessEvent(),a.$apply()})}})},a.resetEmailSuccessEvent=function(){a.resetEmailSuccess=!0,a.closeThisDialog=function(){a.resetEmailSuccess=!1,a.logout()},g(a,{templateUrl:"pages/common/JsBarcode128Dlg.html?rnd="+rndver,preCloseCallback:a.closeThisDialog})},a.logout=function(){if(0==a.form.userInfo.userType)return void b.path("main/landing");localStorage.removeItem("userInfo");var c=copyData(a.form.userInfo),d=apiDomain+logout;$.ajax({type:AJAX_TYPE,data:c,url:d,context:document.body,success:function(c){apiResultsProcessingFun(c,function(){b.path("main/login"),a.form.userInfo={},a.form.facebookInfo=null,a.$apply()})}})},jQuery.validator.addMethod("checkSpace",function(a,b,c){return 0!=a.replace(/\s/g,"").length},$.validator.format("Cannot be an empty string")),jQuery.validator.addMethod("checkConfirmEmail",function(b,c,d){return b==a.email},$.validator.format("Email not match,please try again")),$("#reset").validate({errorPlacement:function(a,b){b.after(a)},rules:{email:{checkSpace:!0},confirmEmail:{checkSpace:!0,checkConfirmEmail:!0}},submitHandler:function(b){a.resetRegistrationEamil()}}),a.$watch(function(){return $(".loginEmail").val()},function(a,b){$(".loginEmail").val(trim(a))}),a.$watch(function(){return $(".confirmEmail").val()},function(a,b){$(".confirmEmail").val(trim(a))}),a.resetEmailEvent=function(){$("#reset").submit()}}var ResetRegisterEmailCtrl=["$scope","$location","$translate","$state","$timeout","form","shoppoDialog",resetRegisterEmailCtrl];angular.module("shoppoweb").controller("ResetRegisterEmailCtrl",ResetRegisterEmailCtrl);