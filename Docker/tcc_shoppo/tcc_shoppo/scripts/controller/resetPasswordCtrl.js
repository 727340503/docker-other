function resetPasswordCtrl(a,b,c,d,e,f,g){a.form=f,a.form.topBar.topBarTitle=c.instant("changePassword"),a.form.topBar.showTopBar=!0,a.form.topBar.lastPage="main/accountManagement",a.form.topBar.showBackBtn=!0,a.form.bottomMenu=!1,a.$root.gotoLastPage=function(){e(function(){b.path(a.form.topBar.lastPage)},200)},a.viewPassword=!0,a.viewConfirmPassword=!0,a.changeViewPassword=function(){a.viewPassword?a.viewPassword=!1:a.viewPassword=!0},a.changeViewConfirmPassword=function(){a.viewConfirmPassword?a.viewConfirmPassword=!1:a.viewConfirmPassword=!0},a.checkoutUserPassword=function(){var b=copyData(a.form.userInfo);b.password=a.oldPassword;var c=apiDomain+checkoutUserPassword;$.ajax({type:AJAX_TYPE,url:c,context:document.body,data:b,success:function(b){apiResultsProcessingFun(b,function(){1==b.result&&(a.verifyPassword=!0),a.$apply()})}})},jQuery.validator.addMethod("checkSpace",function(a,b,c){return 0!=a.replace(/\s/g,"").length},$.validator.format("Cannot be an empty string")),jQuery.validator.addMethod("checkPassword",function(a,b,c){return 0==a.replace(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,15}$/,"").length},$.validator.format("Invalid password. Please try again.")),jQuery.validator.addMethod("checkConfirmPassword",function(b,c,d){return b==a.password},$.validator.format("Password not match,please try again")),$("#reset").validate({errorPlacement:function(a,b){b.after(a)},rules:{password:{required:!1,checkSpace:!0,checkPassword:!0},confirmPassword:{required:!1,checkSpace:!0,checkConfirmPassword:!0}},submitHandler:function(b){a.changeUserPassword()}}),a.resetPasswordEvent=function(){$("#reset").submit()},a.changeUserPassword=function(){var b=copyData(a.form.userInfo);b.password=a.password;var c=apiDomain+changeUserPassword;$.ajax({type:AJAX_TYPE,url:c,context:document.body,data:b,success:function(b){apiResultsProcessingFun(b,function(){1==b.result&&a.resetPasswordSuccessEvent(),a.$apply()})}})},a.resetPasswordSuccessEvent=function(){a.resetPasswordSuccess=!0,a.closeThisDialog=function(){a.resetPasswordSuccess=!1,a.logout()},g(a,{templateUrl:"pages/common/JsBarcode128Dlg.html?rnd="+rndver,preCloseCallback:a.closeThisDialog})},a.logout=function(){if(0==a.form.userInfo.userType)return void b.path("main/landing");localStorage.removeItem("userInfo");var c=copyData(a.form.userInfo),d=apiDomain+logout;$.ajax({type:AJAX_TYPE,data:c,url:d,context:document.body,success:function(c){apiResultsProcessingFun(c,function(){b.path("main/landing"),a.form.userInfo={},a.form.facebookInfo=null,a.$apply()})}})}}var ResetPasswordCtrl=["$scope","$location","$translate","$state","$timeout","form","shoppoDialog",resetPasswordCtrl];angular.module("shoppoweb").controller("ResetPasswordCtrl",ResetPasswordCtrl);