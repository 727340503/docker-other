function loginEmailCtrl(a,b,c,d,e,f){a.form=f,a.form.topBar.topBarTitle=c.instant("Input password"),a.form.topBar.showTopBar=!0,a.form.topBar.showRegisterBtn=!1,a.form.topBar.showBackBtn=!0,a.form.bottomMenu=!1,a.page=1,a.form.topBar.lastPage="/main/login",a.$root.gotoLastPage=function(){e(function(){b.path(a.form.topBar.lastPage)},200)},a.gotoSetProFile=function(){e(function(){b.path("/main/setProfile")},200)},a.loginEvent=function(){var c=copyData(a.form.userInfo);c.loginType=1,c.email=a.form.email,c.password=a.password;var d=apiDomain+newLogin;$.ajax({type:AJAX_TYPE,url:d,context:document.body,data:c,success:function(c){0==c.errorCode?0!=c.result.userType?(a.form.userInfo=c.result,a.form.getDeviceToken(),a.form.getUserPofile(1)):(a.form.userInfo.email=a.form.email,a.form.userInfo.contactEmail=a.form.email,a.form.registerType=1,a.gotoSetProFile()):10426==c.errorCode?(a.form.userInfo.email=a.form.email,b.path("main/emailVerificationResent")):a.$root.warningDlg({msg:c.errorMessage}),a.$apply()}})},$("#login").validate({errorPlacement:function(a,b){b.after(a)},rules:{},submitHandler:function(b){a.loginEvent()}}),a.submitEvent=function(){$("#login").submit()},a.gotoForgetPassword=function(){e(function(){b.path("/main/forgetPassword")},200)}}var LoginEmailCtrl=["$scope","$location","$translate","$state","$timeout","form",loginEmailCtrl];angular.module("shoppoweb").controller("LoginEmailCtrl",LoginEmailCtrl),keepSession=!0;