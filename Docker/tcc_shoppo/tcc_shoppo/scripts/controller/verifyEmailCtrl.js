function verifyEmailCtrl(a,b,c,d,e,f,g,h){b.form=f,b.form.topBar.showTopBar=!0,b.form.topBar.topBarTitle=d.instant("verifyEmailpage"),b.form.topBar.showBackBtn=!0,b.form.bottomMenu=!1,b.form.topBar.lastPage="/main/accountManagement",b.viewPassword=!0,b.viewConfirmPassword=!0,b.changeViewPassword=function(){b.viewPassword?b.viewPassword=!1:b.viewPassword=!0},b.changeViewConfirmPassword=function(){b.viewConfirmPassword?b.viewConfirmPassword=!1:b.viewConfirmPassword=!0},jQuery.validator.addMethod("checkSpace",function(a,b,c){return 0!=a.replace(/\s/g,"").length},$.validator.format("This field is required.")),jQuery.validator.addMethod("checkPassword",function(a,b,c){return 0==a.replace(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,15}$/,"").length},$.validator.format("Invalid password. Please try again.")),jQuery.validator.addMethod("checkConfirmEmail",function(a,c,d){return a==b.loginEmail},$.validator.format("Email not match,please try again")),jQuery.validator.addMethod("checkConfirmPassword",function(a,c,d){return a==b.password},$.validator.format("Password didnâ€™t match.")),$("#registraion").validate({errorPlacement:function(a,b){b.after(a)},rules:{loginEmail:{required:!1,checkSpace:!0},confirmEmail:{required:!1,checkSpace:!0,checkConfirmEmail:!0},password:{required:!1,checkSpace:!0,checkPassword:!0},confirmPassword:{required:!1,checkSpace:!0,checkConfirmPassword:!0}},messages:{},submitHandler:function(a){b.register(1)}}),b.$watch(function(){return $(".loginEmail").val()},function(a,b){$(".loginEmail").val(trim(a))}),b.$watch(function(){return $(".confirmEmail").val()},function(a,b){$(".confirmEmail").val(trim(a))}),b.submitEvent=function(){$("#registraion").submit()},b.$root.gotoLastPage=function(){g(function(){c.path(b.form.topBar.lastPage)},200)},b.form.userInfo.email&&(b.loginEmail=b.form.userInfo.email),b.form.verifyPage=!1,b.register=function(a){var d=copyData(b.form.userInfo);d.email=b.loginEmail,d.password=b.password;var e=apiDomain+verifyLoginEmail;$.ajax({type:AJAX_TYPE,data:d,url:e,context:document.body,success:function(a){0==a.errorCode?(b.form.userInfo.email=b.loginEmail,b.form.email=b.loginEmail,b.form.verifyPage=!0,c.path("/main/emailVerification"),b.$apply()):10489==a.errorCode?(b.form.userInfo.email=b.loginEmail,b.form.email=b.loginEmail,b.form.verifyPage=!0,c.path("main/emailVerificationResent")):b.$root.warningDlg({msg:a.errorMessage}),b.$apply()}})},b.init=function(){},b.init()}var VerifyEmailCtrl=["$filter","$scope","$location","$translate","$state","form","$timeout","shoppoDialog",verifyEmailCtrl];angular.module("shoppoweb").controller("VerifyEmailCtrl",VerifyEmailCtrl);