function loginMobileCtrl(a,b,c,d,e,f){a.form=f,a.form.topBar.topBarTitle=c.instant("Login"),a.form.topBar.showTopBar=!0,a.form.topBar.showRegisterBtn=!1,a.form.topBar.showBackBtn=!0,a.form.bottomMenu=!1,a.page=1,a.form.topBar.lastPage="/main/login",a.$on("onRepeatLast",function(b,c,d){$("#phoneAreaCode").mobiscroll().treelist({theme:"ios",display:"bottom",lang:"en_US",labels:["business"],onSelect:function(b,c){b=b.substr(b.indexOf("+"),b.length),$("#phoneAreaCode_dummy").val(b),b=b.replace("+","00"),a.phoneAreaCode=b}});e(function(){a.phoneAreaCode=a.form.phoneAreaCode,$("#phoneAreaCode_dummy").val(phoneCodeFormat(a.phoneAreaCode))},200)}),a.$root.gotoLastPage=function(){e(function(){b.path(a.form.topBar.lastPage)},200)},a.gotoEmailLogin=function(){b.path("/main/loginEmail")},a.gotoSetProFile=function(){e(function(){b.path("/main/setProfile")},200)},a.$root.gotoRegister=function(){e(function(){b.path("/main/registration")},200)},a.$root.closePopup=function(){a.form.topBar.topBarTitle=c.instant("Login"),a.page=1,a.form.topBar.showBackBtn=!0,a.form.topBar.showCloseBtn=!1,a.form.topBar.showRegisterBtn=!0},a.preRegister=function(){a.form.topBar.topBarTitle=c.instant("Fill passcode"),a.page=2,e(function(){$(".verifyCode").focus()}),a.form.topBar.showBackBtn=!1,a.form.topBar.showCloseBtn=!0,a.form.topBar.showRegisterBtn=!1},a.sendSmsEvent=function(b){$(".phoneInput").blur(),e(function(){var c=copyData(a.form.userInfo);c.phoneAreaCode=a.phoneAreaCode.replace("+","00"),c.phone=a.form.phone,c.verifyType=b;var d=apiDomain+sendSms;$.ajax({type:AJAX_TYPE,url:d,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.smsVerifyId=b.result.smsVerifyId,a.form.userInfo.phoneAreaCode=a.phoneAreaCode,a.form.userInfo.phone=a.form.phone,a.preRegister(),a.timeEvent(),a.$apply()})}})},200)},a.time=0;var g;a.timeEvent=function(){a.time=60,g&&clearInterval(g),g=setInterval(function(){a.time--,a.time<=0&&(clearInterval(g),a.time=0),a.$apply()},1e3)},a.resendSmsEvent=function(){if(0==a.time){var b=copyData(a.form.userInfo);b.phoneAreaCode=a.phoneAreaCode.replace("+","00"),b.phone=a.form.phone,b.verifyType=2;var c=apiDomain+resendSms;$.ajax({type:AJAX_TYPE,url:c,context:document.body,data:b,success:function(b){apiResultsProcessingFun(b,function(){a.timeEvent(),a.$apply()})}})}},a.loginEvent=function(b){a.verifyCode&&e(function(){var c=copyData(a.form.userInfo);c.loginType=b,c.phone=a.form.phone,c.phoneAreaCode=a.phoneAreaCode.replace("+","00"),c.smsVerifyId=a.smsVerifyId,c.verifyCode=a.verifyCode;var d=apiDomain+newLogin;$.ajax({type:AJAX_TYPE,url:d,context:document.body,data:c,success:function(c){apiResultsProcessingFun(c,function(){a.form.userInfo=c.result,a.form.getDeviceToken(),a.form.getUserPofile(b),a.$apply()})}})},200)},$("#login").validate({errorPlacement:function(a,b){b.after(a)},rules:{},submitHandler:function(b){a.sendSmsEvent(2)}}),a.submitEvent=function(){$("#login").submit()}}var LoginMobileCtrl=["$scope","$location","$translate","$state","$timeout","form",loginMobileCtrl];angular.module("shoppoweb").controller("LoginMobileCtrl",LoginMobileCtrl),keepSession=!0;