function customerAdjustCouponCtrl(a,b,c,d,e,f,g){a.form=e,a.cancel=function(){f.path("/main/customerDetail")},$("#baseInfo").validate({errorPlacement:function(a,b){b.parent().after(a)},rules:{},messages:{},submitHandler:function(b){"0"==a.adjustment?a.addUserCouponEvent():a.revokeUserCouponEvent()}}),a.adjustment="0",a.couponType="1",a.couponDetail={},a.couponDetail.qty=1,a.couponDetail.couponId="",a.getCouponList=function(){var b=apiDomain+getCouponListApi,c=copyData(a.form.userInfo);c.startRow=0,c.maxRows=1e6,c.sortType="ASC",c.sortField="id",c.status="1,2",c.merchantId=a.form.merchantId,c.campaignId=a.campaignId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.couponList=b.resultList,a.$apply()})}})},a.getCampaignList=function(){var b=apiDomain+getCampaignListApi,c=copyData(a.form.userInfo);c.startRow=0,c.maxRows=1e6,c.sortType="ASC",c.sortField="id",c.merchantId=a.form.merchantId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.campaignList=b.resultList,a.$apply()})}})},a.getCampaignList(),a.getUserCouponListEvent=function(){var b=apiDomain+getUserCouponListApi,c=copyData(a.form.userInfo);c.startRow=0,c.maxRows=1e6,c.sortType="ASC",c.sortField="id",c.customerId=a.form.customerId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.userCouponList=b.resultList,a.$apply()})}})},a.getUserCouponListEvent(),a.addUserCouponEvent=function(){var b=apiDomain+addUserCouponApi,c=copyData(a.form.userInfo);c.customerId=a.form.customerId,c.couponId=a.couponDetail.couponId,c.qty=a.couponDetail.qty,c.remark=a.couponDetail.remark,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","Success！"),d(function(){f.path("/main/customerDetail")}),a.$apply()})}})},a.revokeUserCouponEvent=function(){var b=apiDomain+revokeUserCouponApi,c=copyData(a.form.userInfo);c.customerId=a.form.customerId,c.userCouponId=a.couponDetail.userCouponId,c.remark=a.couponDetail.userRemark,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","Success！"),d(function(){f.path("/main/customerDetail")}),a.$apply()})}})}}var CustomerAdjustCouponCtrl=["$scope","$translate","$state","$timeout","form","$location","$modal",customerAdjustCouponCtrl];angular.module("keeperp").controller("CustomerAdjustCouponCtrl",CustomerAdjustCouponCtrl);