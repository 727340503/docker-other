function addUserCtrl(a,b,c,d,e,f,g,h){a.form=d,a.roleList=[],a.getSystemRoleList=function(){var b=apiDomain+getSystemRoleAllListApi,c=copyData(a.form.userInfo);c.startRecord=0,c.maxRecords=1e6,c.sortType="ASC",c.sortField="createdTime",$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.roleList=b.result,a.$apply()})}})},a.setRoleName=function(){for(var b=0;b<a.roleList.length;b++)a.roleList[b].id==a.roleId&&(a.roleType=a.roleList[b].roleType)},a.merchantListEvent=function(){var b=apiDomain+getMerchantListApi,c=copyData(a.form.userInfo);c.startRow=0,c.maxRows=1e6,c.sortType="ASC",c.sortField="id",$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.merchantList=b.resultList,a.$apply()})}})},a.save=function(){var b=apiDomain+createUserApi,c=copyData(a.form.userInfo);c.roleId=a.roleId,c.userName=a.userName,c.password=a.password,c.mobile=a.mobile,c.email=a.email,c.status=a.status,c.merchantId=a.merchantId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","Success！"),a.$apply()})}})},jQuery.validator.addMethod("checkPassword",function(a,b,c){return 0==a.replace(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,15}$/,"").length},$.validator.format("Enter a right format password.")),$("#baseInfo").validate({errorPlacement:function(a,b){b.parent().after(a)},rules:{addpassword:{required:!0,checkPassword:!0}},messages:{},submitHandler:function(b){a.save()}}),a.cancel=function(){e.path("/main/acountList")},a.init=function(){a.getSystemRoleList(),a.merchantListEvent()},a.init()}var AddUserCtrl=["$scope","$translate","$http","form","$location","uiGridConstants","$filter","i18nService",addUserCtrl];angular.module("keeperp").controller("AddUserCtrl",AddUserCtrl);