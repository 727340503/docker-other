function reasonDetailCtrl(a,b,c,d,e,f,g,h,i){a.form=d,a.getStampAdjustReasonDetail=function(){var b=apiDomain+getStampAdjustReasonDetailApi,c=copyData(a.form.userInfo);c.id=a.form.reasonId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.reasonDetail=b.result,a.reasonDetail.merchantId+="",a.reasonDetail.langData=a.reasonDetail.stampAdjustReasonLangMaps[0],a.pageLanguage=a.reasonDetail.langData.langCode,a.merchantListEvent(),a.$apply()})}})},a.selectPageLang=function(){g(function(){for(var b=0;b<a.reasonDetail.stampAdjustReasonLangMaps.length;b++)a.reasonDetail.stampAdjustReasonLangMaps[b].langCode==a.pageLanguage&&(a.reasonDetail.langData=a.reasonDetail.stampAdjustReasonLangMaps[b])})},a.merchantListEvent=function(){var b=apiDomain+getMerchantListApi,c=copyData(a.form.userInfo);c.startRow=0,c.maxRows=1e6,c.sortType="ASC",c.sortField="id",$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.merchantList=b.resultList,a.reasonDetail.merchantId||(a.reasonDetail.merchantId=a.merchantList[0].id+""),a.getMerchantDetail(a.reasonDetail.merchantId),a.$apply()})}})},a.getMerchantDetail=function(b){var c=apiDomain+getMerchantDetailApi,d=copyData(a.form.userInfo);d.merchantId=b,$.ajax({type:a.form.postType,url:c,context:document.body,data:d,success:function(b){apiResultsProcessingFun(b,function(){for(var c=0;c<a.form.languageList.length;c++)a.form.languageList[c].select=!1;a.merchantDetail=b.result;for(var c=0;c<a.merchantDetail.merchantLangMapList.length;c++)a.merchantDetail.merchantLangMapList[c].isDefault&&(a.reasonDetail.langData.langCode=a.merchantDetail.merchantLangMapList[c].langCode);a.$apply()})}})},a.save=function(){var b=apiDomain+updateStampAdjustReasonApi,c=copyData(a.form.userInfo);c.id=a.form.reasonId,c.langData=[{id:a.reasonDetail.langData.id,content:a.reasonDetail.langData.content}],c.langData=angular.toJson(c.langData),$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","Success！"),a.$apply()})}})},a.addStampAdjustReason=function(){var b=apiDomain+addStampAdjustReasonApi,c=copyData(a.form.userInfo);c.langData=[{content:a.reasonDetail.langData.content,langCode:a.reasonDetail.langData.langCode}],c.langData=angular.toJson(c.langData),c.merchantId=a.reasonDetail.merchantId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","Success！"),g(function(){e.path("/main/reasonList")}),a.$apply()})}})},$("#baseInfo").validate({errorPlacement:function(a,b){b.parent().after(a)},rules:{},messages:{},submitHandler:function(b){a.form.reasonId?a.save():a.addStampAdjustReason()}}),a.cancel=function(){e.path("/main/reasonList")},a.init=function(){a.form.reasonId?a.getStampAdjustReasonDetail():(a.reasonDetail={langData:{}},a.reasonDetail.merchantId=a.form.merchantId+"",a.merchantListEvent())},a.init()}var ReasonDetailCtrl=["$scope","$translate","$http","form","$location","uiGridConstants","$timeout","$filter","i18nService",reasonDetailCtrl];angular.module("keeperp").controller("ReasonDetailCtrl",ReasonDetailCtrl);