function keeperUserDetailCtrl(a,b,c,d,e,f,g,h,i){if(a.form=d,a.storeList=[],a.mallInput=!1,a.getStoreList=function(){var b=apiDomain+getStoreListApi,c=copyData(a.form.userInfo);c.startRow=0,c.maxRows=1e6,c.sortType="ASC",c.sortField="createdTime",c.merchantId=a.userDetail.merchantId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.storeList=b.resultList,a.$apply()})}})},a.getSystemUserDetail=function(){var b=apiDomain+getKeeperUserDetailApi,c=copyData(a.form.userInfo);c.id=a.form.userId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.userDetail=b.result,a.userDetail.status+="",a.userDetail.storeId+="",a.userDetail.merchantId+="",a.merchantListEvent(),a.$apply()})}})},a.merchantListEvent=function(){var b=apiDomain+getMerchantListApi,c=copyData(a.form.userInfo);c.startRow=0,c.maxRows=1e6,c.sortType="ASC",c.sortField="id",$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.merchantList=b.resultList,a.userDetail.merchantId||(a.userDetail.merchantId=a.merchantList[0].id+""),a.getStoreList(),a.$apply()})}})},a.save=function(){var b=apiDomain+updateKeeperUserApi,c=copyData(a.form.userInfo);c.id=a.form.userId,c.storeId=a.userDetail.storeId,c.userName=a.userDetail.userName,c.password=a.password,c.mobile=a.userDetail.mobile,c.email=a.userDetail.email,c.status=a.userDetail.status,c.staffId=a.userDetail.staffId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","Success！"),a.$apply()})}})},a.addKeeperUser=function(){var b=apiDomain+addKeeperUserApi,c=copyData(a.form.userInfo);c.storeId=a.userDetail.storeId,c.userName=a.userDetail.userName,c.password=a.password,c.mobile=a.userDetail.mobile,c.email=a.userDetail.email,c.status=a.userDetail.status,c.staffId=a.userDetail.staffId,c.merchantId=a.userDetail.merchantId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","Success！"),g(function(){e.path("/main/keeperUserList")}),a.$apply()})}})},a.form.userId)var j=!1;else var j=!0;jQuery.validator.addMethod("checkPassword",function(a,b,c){return 0==a.replace(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,15}$/,"").length},$.validator.format("Enter a right format password.")),jQuery.validator.addMethod("checkName",function(a,b,c){return 0==a.replace(/^[a-zA-Z\d]{6,12}$/,"").length},$.validator.format("Enter 6-12 letters (a-zA-Z)/numbers (0-9)")),$("#baseInfo").validate({errorPlacement:function(a,b){b.parent().after(a)},rules:{updatepassword:{required:j,checkPassword:!0},userName:{required:!0,checkName:!0}},messages:{},submitHandler:function(b){a.form.userId?a.save():a.addKeeperUser()}}),a.cancel=function(){e.path("/main/keeperUserList")},a.init=function(){a.form.userId?a.getSystemUserDetail():(a.userDetail={status:"1",storeId:""},a.userDetail.merchantId=a.form.merchantId+"",a.merchantListEvent())},a.init()}var KeeperUserDetailCtrl=["$scope","$translate","$http","form","$location","uiGridConstants","$timeout","$filter","i18nService",keeperUserDetailCtrl];angular.module("keeperp").controller("KeeperUserDetailCtrl",KeeperUserDetailCtrl);