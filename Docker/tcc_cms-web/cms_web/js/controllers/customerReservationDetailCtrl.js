function customerReservationDetailCtrl(a,b,c,d,e,f,g,h){a.form=e,a.cancel=function(){g.path("/main/customerDetail")},a.form.reservationHistory=!0,a.mappingStatus=function(a){var b="";switch(a){case 1:b=f("translate")("Confirmed");break;case 2:b=f("translate")("Available at store");break;case 3:b=f("translate")("Settled");break;case 4:b=f("translate")("Expired");break;case 5:b=f("translate")("Incompleted");break;case 6:b=f("translate")("Cancelled");break;default:b=a}return b},a.getUserReservationDetail=function(){var b=apiDomain+getUserReservationDetailApi,c=copyData(a.form.userInfo);c.userReservationId=a.form.userReservationId,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.reservationDetail=b.result,a.reservationDetail.status=a.mappingStatus(a.reservationDetail.status),a.reservationDetail.rule="Stamp Qty: "+a.reservationDetail.stampQty,a.reservationDetail.cashQty&&(a.reservationDetail.rule+=" + Cash Qty: "+a.reservationDetail.cashQty),a.reservationDetail.contactPhone&&(a.reservationDetail.contactPhone=a.form.phoneCodeFormat(a.reservationDetail.contactPhoneAreaCode)+" - "+a.reservationDetail.contactPhone),a.reservationDetail.storeNameLong=a.reservationDetail.storeName+" ("+a.reservationDetail.storeAddress+")",a.$apply()})}})},a.getUserReservationDetail(),a.AvailableAtStore=function(){function b(a,b,c,d,e){a.showOk=!0,a.msg=e("translate")("AreYouSure"),a.cancel=function(){b.dismiss("cancel")},a.ok=function(){a.changeStatus(),b.dismiss("cancel")}}var c=["$scope","$modalInstance","$state","$translate","$filter",b];h.open({templateUrl:"pages/common/warningDlg.html",controller:c,scope:a})},a.changeStatus=function(){var b=apiDomain+updateUserReservationStatusApi,c=copyData(a.form.userInfo);c.status=2,c.ids=a.reservationDetail.id,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","SuccessÔºÅ"),d(function(){g.path("/main/reservationList")})})}})}}var CustomerReservationDetailCtrl=["$scope","$translate","$state","$timeout","form","$filter","$location","$modal",customerReservationDetailCtrl];angular.module("keeperp").controller("CustomerReservationDetailCtrl",CustomerReservationDetailCtrl);