function customerAdjustStampsCtrl(a,b,c,d,e,f,g){a.form=e,a.cancel=function(){f.path("/main/customerDetail")},a.form.stampHistory=!0,$("#baseInfo").validate({errorPlacement:function(a,b){b.parent().after(a)},rules:{},messages:{},submitHandler:function(b){a.updateUserStampCount()}}),a.$watch("stampsDetail.stampQty",function(b,c){new RegExp("^[0-9]*$").test(b)?a.stampsDetail.stampQty=b:a.stampsDetail.stampQty=c,""!=b&&b||(a.stampsDetail.stampQty="")}),a.updateUserStampCount=function(){var b=apiDomain+updateUserStampCountApi,c=copyData(a.form.userInfo);c.customerId=a.form.customerId,c.campaignId=a.form.campaignId,c.type=a.stampsDetail.type,c.stampQty=a.stampsDetail.stampQty,c.remarks=a.stampsDetail.remarks,$.ajax({type:a.form.postType,url:b,context:document.body,data:c,success:function(b){apiResultsProcessingFun(b,function(){a.alert("success"," ","SuccessÔºÅ"),d(function(){f.path("/main/customerDetail")}),a.$apply()})}})},a.stampsDetail={type:""}}var CustomerAdjustStampsCtrl=["$scope","$translate","$state","$timeout","form","$location","$modal",customerAdjustStampsCtrl];angular.module("keeperp").controller("CustomerAdjustStampsCtrl",CustomerAdjustStampsCtrl);